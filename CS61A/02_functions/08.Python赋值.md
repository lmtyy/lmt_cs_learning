### **Python 赋值语句知识点详解**
赋值语句是 Python 中最基础的操作之一，但背后涉及 **变量绑定、对象引用、可变/不可变对象** 等关键概念。以下是系统总结：

---

## **1. 基本语法**
```python
变量名 = 表达式
```
**示例**：
```python
x = 10             # 整数赋值
name = "Alice"     # 字符串赋值
lst = [1, 2, 3]    # 列表赋值
```

---

## **2. 核心规则**
### **(1) 变量是对象的引用**
- Python 中 **变量不是存储数据的盒子**，而是指向对象的标签（引用）。
- 赋值语句实际是将变量名绑定到对象。

**示例**：
```python
a = 10    # a 指向整数对象 10
b = a     # b 也指向同一个对象 10
print(id(a), id(b))  # 输出相同的内存地址
```

### **(2) 可变 vs 不可变对象**
- **不可变对象**（如 `int`, `str`, `tuple`）：  
  值不可修改，赋值会创建新对象。
  ```python
  x = 10
  x = x + 1  # x 指向新的整数对象 11
  ```
- **可变对象**（如 `list`, `dict`, `set`）：  
  值可修改，变量引用不变。
  ```python
  lst = [1, 2]
  lst.append(3)  # 修改原列表，lst 仍指向同一对象
  ```

### **(3) 多重赋值**
```python
x, y, z = 1, "a", [1, 2]    # 同时赋值多个变量
a = b = c = 0                # 所有变量指向同一个对象
```

---

## **3. 进阶知识点**
### **(1) 浅拷贝 vs 深拷贝**
- **浅拷贝**（`copy()`）：  
  只复制最外层对象，内层对象仍共享引用。
  ```python
  lst1 = [1, [2, 3]]
  lst2 = lst1.copy()        # 浅拷贝
  lst2[1][0] = 99          # 修改会影响 lst1
  print(lst1)              # [1, [99, 3]]
  ```
- **深拷贝**（`deepcopy()`）：  
  递归复制所有嵌套对象。
  ```python
  from copy import deepcopy
  lst2 = deepcopy(lst1)    # 深拷贝
  lst2[1][0] = 99         # 不影响 lst1
  ```

### **(2) 链式赋值与顺序**
```python
x = y = []    # x 和 y 指向同一个列表
x.append(1)   # y 也会被修改
```
等价于：
```python
y = []
x = y
```

### **(3) 增量赋值（`+=` 的特殊性）**
- 对不可变对象（如 `int`）会创建新对象：
  ```python
  x = 10
  x += 1      # x = x + 1，新对象
  ```
- 对可变对象（如 `list`）会就地修改：
  ```python
  lst = [1, 2]
  lst += [3]  # 等价于 lst.extend([3])
  ```

---

## **4. 常见陷阱**
### **(1) 可变对象作为默认参数**
```python
def append_to(item, lst=[]):  # 默认列表在函数定义时创建
    lst.append(item)
    return lst

print(append_to(1))  # [1]
print(append_to(2))  # [1, 2] （预期是 [2]）
```
**修复**：
```python
def append_to(item, lst=None):
    if lst is None:
        lst = []
    lst.append(item)
    return lst
```

### **(2) 变量交换的误区**
```python
a, b = [1], [2]
a, b = b, a    # 正确交换（创建临时元组）
a = b; b = a    # 错误！a 和 b 会指向同一对象
```

---

## **5. 与环境图的关系**
赋值语句在环境图中的表现：
1. **新变量**：在当前帧的 `f_locals` 中添加键值对。
2. **修改可变对象**：更新对象内容，变量引用不变。
3. **重新赋值**：变量指向新对象，旧对象可能被垃圾回收。

**示例**：
```python
x = 10      # Global Frame: x → 10
x = "abc"   # Global Frame: x → "abc" （整数 10 可能被回收）
```

---

## **6. 总结**
| **关键点**               | **说明**                                    |
| ------------------------ | ------------------------------------------- |
| 变量是对象的引用         | 赋值 `a = b` 表示 `a` 和 `b` 指向同一对象。 |
| 不可变对象赋值创建新对象 | 如 `x += 1` 对整数会创建新对象。            |
| 可变对象赋值共享引用     | 修改列表内容会影响所有引用它的变量。        |
| 浅拷贝 vs 深拷贝         | 嵌套对象需谨慎处理拷贝行为。                |
| 默认参数避免可变对象     | 使用 `None` 作为默认值，防止意外共享。      |

掌握这些知识点后，可以避免大多数 Python 赋值相关的 Bug！