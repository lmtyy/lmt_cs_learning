程序流程结构，也叫控制结构，是程序的骨架，它决定了代码的执行顺序和逻辑。C++ 和其他编程语言一样，主要有三种基本结构：

1.  **顺序结构**：代码按照从上到下的顺序逐行执行。
2.  **选择结构**：根据条件判断的真假，来决定执行哪一部分代码。
3.  **循环结构**：在条件满足的情况下，重复执行某一段代码。

此外，还有用于流程跳转的语句。

---

### 1. 顺序结构 (Sequence Structure)

这是最简单、最基础的结构。程序从 `main()` 函数开始，一行一行地依次执行语句，直到函数结束。

**示例：**
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10; // 语句1：先执行
    int b = 20; // 语句2：接着执行
    int sum = a + b; // 语句3：然后执行
    cout << "Sum is: " << sum << endl; // 语句4：最后执行
    return 0; // 语句5：退出程序
}
```
输出：
```
Sum is: 30
```

---

### 2. 选择结构 (Selection Structure)

选择结构用于根据条件做出决策。C++ 提供了以下几种选择语句：

#### a. `if` 语句
最基本的条件判断。
```cpp
if (condition) {
    // 如果 condition 为 true，则执行这里的代码
}
```

#### b. `if...else` 语句
提供两个分支。
```cpp
if (condition) {
    // 条件为 true 时执行
} else {
    // 条件为 false 时执行
}
```

#### c. `else if` 语句
处理多个条件。
```cpp
if (condition1) {
    // condition1 为 true 时执行
} else if (condition2) {
    // condition1 为 false 但 condition2 为 true 时执行
} else {
    // 所有条件都为 false 时执行
}
```

#### d. `switch` 语句
基于一个整型或枚举类型的表达式，进行多路分支选择。它比一长串的 `if...else if` 更清晰。
```cpp
switch (expression) {
    case constant1:
        // 如果 expression == constant1，执行这里
        break; // break 至关重要，用于跳出 switch
    case constant2:
        // 如果 expression == constant2，执行这里
        break;
    default:
        // 如果 expression 不匹配任何 case，执行这里
        break;
}
```
**关键点**：`break` 语句用于终止一个 `case` 并跳出 `switch` 块。如果省略 `break`，程序会继续执行下一个 `case` 中的语句，这被称为“穿透”（fallthrough），有时会故意这样设计，但通常需要添加注释说明。

**`if` vs `switch`**：
*   `if` 可以处理范围判断（如 `if (score > 60)`）和布尔条件。
*   `switch` 只能处理精确的等值判断（通常是整数或字符）。

---

### 3. 循环结构 (Loop Structure)

循环结构用于重复执行代码块。

#### a. `for` 循环
最适合在**已知循环次数**的情况下使用。结构紧凑，将循环变量的初始化、条件判断和更新都放在一行。
```cpp
for (initialization; condition; update) {
    // 循环体：只要 condition 为 true，就重复执行
}
```
**示例**：计算 1 到 10 的和
```cpp
int sum = 0;
for (int i = 1; i <= 10; i++) {
    sum += i;
}
cout << sum << endl; // 输出 55
```

#### b. `while` 循环
在**未知循环次数**，但已知**循环条件**时使用。先判断条件，再执行循环体。
```cpp
while (condition) {
    // 循环体：只要 condition 为 true，就重复执行
}
```
**示例**：验证用户输入，直到输入有效
```cpp
int number;
cout << "Please enter a positive number: ";
cin >> number;
while (number <= 0) {
    cout << "Invalid input. Please enter a positive number: ";
    cin >> number;
}
```

#### c. `do...while` 循环
类似 `while` 循环，但它会**先执行一次循环体**，再判断条件。适用于**循环体至少需要执行一次**的场景。
```cpp
do {
    // 循环体：先执行一次，然后只要 condition 为 true，就重复执行
} while (condition);
```
**示例**：菜单显示
```cpp
char choice;
do {
    cout << "1. Play game" << endl;
    cout << "2. Load game" << endl;
    cout << "3. Quit" << endl;
    cout << "Enter your choice: ";
    cin >> choice;
} while (choice != '1' && choice != '2' && choice != '3');
// 至少会显示一次菜单，然后根据输入决定是否继续显示
```

**`for` vs `while`**：
*   逻辑上它们可以互相替换。
*   习惯上，`for` 用于计数器控制的循环，`while` 用于条件控制的循环。

---

### 4. 跳转语句 (Jump Statements)

这些语句用于改变程序的正常执行流。

#### a. `break` 语句
1.  在 `switch` 语句中终止一个 `case`。
2.  **立即终止**它所在的那一层**循环**（`for`, `while`, `do-while`）并跳出。

**示例**：在数组中查找元素，找到后立即退出循环
```cpp
int arr[] = {5, 2, 8, 1, 9};
int target = 8;
int index = -1;

for (int i = 0; i < 5; i++) {
    if (arr[i] == target) {
        index = i;
        break; // 找到目标，立即跳出循环，不再继续遍历
    }
}
```

#### b. `continue` 语句
**立即跳过**当前循环的**剩余语句**，直接开始**下一次循环**（进行条件判断和更新）。

**示例**：打印 1 到 10 之间的所有奇数
```cpp
for (int i = 1; i <= 10; i++) {
    if (i % 2 == 0) { // 如果是偶数
        continue; // 跳过下面的 cout 语句，直接执行 i++
    }
    cout << i << " ";
}
// 输出：1 3 5 7 9
```

#### c. `goto` 语句
**无条件跳转**到同一函数内的某个标签处。**强烈不建议使用**，因为它会严重破坏程序的结构，使逻辑变得混乱难懂，被称为“面条代码”。现代编程中几乎总是可以用其他结构（如循环、函数）来替代它。

**语法**：
```cpp
goto label;
...
...
label: statement;
```

#### d. `return` 语句
用于从函数中返回，并可携带一个返回值。当在 `main()` 函数中执行 `return 0;` 时，意味着程序正常结束。

---

### 总结与选择指南

| 结构类型 | 关键字                        | 适用场景                     |
| :------- | :---------------------------- | :--------------------------- |
| **顺序** | (语句顺序)                    | 代码默认的执行方式           |
| **选择** | `if`, `else`, `switch`        | 需要根据条件做出不同反应时   |
| **循环** | `for`, `while`, `do-while`    | 需要重复执行相似任务时       |
| **跳转** | `break`, `continue`, `return` | 需要提前终止循环或跳过迭代时 |

**最佳实践建议**：
*   **清晰至上**：选择能让代码最易读的结构。例如，循环次数明确就用 `for`，不明确就用 `while`。
*   **避免深度嵌套**：过多的 `if` 嵌套或循环嵌套会使代码难以理解。有时可以通过提取函数来简化。
*   **慎用 `goto`**：几乎在任何情况下，都有比 `goto` 更好的选择。
*   **注意 `switch` 的穿透**：忘记写 `break` 是一个常见错误。如果故意利用穿透特性，请务必添加注释。
