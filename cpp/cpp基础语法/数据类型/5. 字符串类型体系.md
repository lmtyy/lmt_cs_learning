---

## 1. å­—ç¬¦ä¸²ç±»å‹ä½“ç³»

C++ä¸­çš„å­—ç¬¦ä¸²ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

### 1.1 Cé£æ ¼å­—ç¬¦ä¸²
- **å­—ç¬¦æ•°ç»„**ï¼šä»¥ç©ºå­—ç¬¦`\0`ç»“å°¾çš„`char`æ•°ç»„
- **æŒ‡é’ˆè¡¨ç¤º**ï¼š`char*`æˆ–`const char*`æŒ‡å‘å­—ç¬¦ä¸²

### 1.2 C++å­—ç¬¦ä¸²ç±»
- **`std::string`**ï¼šåŸºäº`char`çš„æ ‡å‡†å­—ç¬¦ä¸²ï¼ˆæœ€å¸¸ç”¨ï¼‰
- **`std::wstring`**ï¼šåŸºäº`wchar_t`çš„å®½å­—ç¬¦ä¸²
- **`std::u16string`**ï¼šåŸºäº`char16_t`çš„UTF-16å­—ç¬¦ä¸²ï¼ˆC++11ï¼‰
- **`std::u32string`**ï¼šåŸºäº`char32_t`çš„UTF-32å­—ç¬¦ä¸²ï¼ˆC++11ï¼‰
- **`std::string_view`**ï¼šå­—ç¬¦ä¸²è§†å›¾ï¼Œä¸æ‹¥æœ‰æ•°æ®ï¼ˆC++17ï¼‰

---

## 2. Cé£æ ¼å­—ç¬¦ä¸²

### 2.1 åŸºæœ¬å®šä¹‰å’Œä½¿ç”¨
```cpp
#include <iostream>
#include <cstring>  // Cå­—ç¬¦ä¸²å‡½æ•°
using namespace std;

int main() {
    // æ–¹å¼1ï¼šå­—ç¬¦æ•°ç»„ï¼ˆè‡ªåŠ¨æ·»åŠ \0ï¼‰
    char str1[] = "Hello";
    
    // æ–¹å¼2ï¼šæ˜¾å¼æŒ‡å®šå¤§å°
    char str2[6] = {'H', 'e', 'l', 'l', 'o', '\0'};
    
    // æ–¹å¼3ï¼šå­—ç¬¦æŒ‡é’ˆ
    const char* str3 = "Hello";
    
    cout << "str1: " << str1 << endl;
    cout << "str2: " << str2 << endl;
    cout << "str3: " << str3 << endl;
    
    return 0;
}
```

### 2.2 å¸¸ç”¨Cå­—ç¬¦ä¸²å‡½æ•°
```cpp
#include <iostream>
#include <cstring>
using namespace std;

void c_string_functions() {
    char str1[20] = "Hello";
    char str2[20] = "World";
    char str3[20];
    
    // å­—ç¬¦ä¸²é•¿åº¦ï¼ˆä¸åŒ…æ‹¬\0ï¼‰
    cout << "str1é•¿åº¦: " << strlen(str1) << endl;
    
    // å­—ç¬¦ä¸²å¤åˆ¶
    strcpy(str3, str1);
    cout << "å¤åˆ¶åstr3: " << str3 << endl;
    
    // å­—ç¬¦ä¸²è¿æ¥
    strcat(str3, " ");
    strcat(str3, str2);
    cout << "è¿æ¥åstr3: " << str3 << endl;
    
    // å­—ç¬¦ä¸²æ¯”è¾ƒ
    int cmp = strcmp(str1, str2);
    cout << "æ¯”è¾ƒç»“æœ: " << cmp << endl;
    // <0: str1 < str2, =0: ç›¸ç­‰, >0: str1 > str2
    
    // å­—ç¬¦ä¸²æŸ¥æ‰¾
    char* found = strstr(str3, "World");
    if (found) {
        cout << "æ‰¾åˆ°å­ä¸²ä½ç½®: " << found - str3 << endl;
    }
    
    // å­—ç¬¦æŸ¥æ‰¾
    char* char_found = strchr(str1, 'e');
    if (char_found) {
        cout << "æ‰¾åˆ°å­—ç¬¦ä½ç½®: " << char_found - str1 << endl;
    }
}
```

---

## 3. std::stringï¼ˆæœ€å¸¸ç”¨çš„å­—ç¬¦ä¸²ç±»ï¼‰

### 3.1 åŸºæœ¬æ“ä½œ
```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    // å¤šç§æ„é€ æ–¹å¼
    string s1;                   // ç©ºå­—ç¬¦ä¸²
    string s2 = "Hello";         // ä»Cå­—ç¬¦ä¸²æ„é€ 
    string s3("World");          // ç›´æ¥æ„é€ 
    string s4(5, 'A');           // 5ä¸ª'A'
    string s5(s2);               // æ‹·è´æ„é€ 
    string s6(s2, 1, 3);         // ä»ä½ç½®1å¼€å§‹ï¼Œå–3ä¸ªå­—ç¬¦ï¼š"ell"
    
    cout << "s1: '" << s1 << "'" << endl;
    cout << "s2: " << s2 << endl;
    cout << "s3: " << s3 << endl;
    cout << "s4: " << s4 << endl;
    cout << "s5: " << s5 << endl;
    cout << "s6: " << s6 << endl;
    
    return 0;
}
```

### 3.2 å­—ç¬¦ä¸²æ“ä½œå’Œä¿®æ”¹
```cpp
#include <iostream>
#include <string>
using namespace std;

void string_operations() {
    string str = "Hello";
    
    // è·å–é•¿åº¦
    cout << "é•¿åº¦: " << str.length() << endl;     // 5
    cout << "å¤§å°: " << str.size() << endl;       // 5
    cout << "æ˜¯å¦ä¸ºç©º: " << str.empty() << endl;   // 0
    
    // è®¿é—®å­—ç¬¦
    cout << "ç¬¬ä¸€ä¸ªå­—ç¬¦: " << str[0] << endl;      // H
    cout << "æœ€åä¸€ä¸ªå­—ç¬¦: " << str.back() << endl; // o
    cout << "ç¬¬äºŒä¸ªå­—ç¬¦: " << str.at(1) << endl;   // e
    
    // ä¿®æ”¹å­—ç¬¦ä¸²
    str.append(" World");          // Hello World
    str += "!";                    // Hello World!
    str.insert(5, " C++");         // Hello C++ World!
    str.replace(6, 3, "Programming"); // Hello Programming World!
    str.erase(5, 12);              // Hello!
    
    cout << "ä¿®æ”¹å: " << str << endl;
    
    // æ¸…ç©ºå­—ç¬¦ä¸²
    str.clear();
    cout << "æ¸…ç©ºåæ˜¯å¦ä¸ºç©º: " << str.empty() << endl;
}
```

### 3.3 å­—ç¬¦ä¸²æŸ¥æ‰¾å’Œæ¯”è¾ƒ
```cpp
#include <iostream>
#include <string>
using namespace std;

void string_search_compare() {
    string text = "The quick brown fox jumps over the lazy dog";
    string word = "fox";
    
    // æŸ¥æ‰¾
    size_t pos = text.find(word);
    if (pos != string::npos) {
        cout << "æ‰¾åˆ° '" << word << "' åœ¨ä½ç½®: " << pos << endl;
    }
    
    // ä»åå¾€å‰æŸ¥æ‰¾
    pos = text.rfind("the");
    if (pos != string::npos) {
        cout << "ä»åæ‰¾åˆ° 'the' åœ¨ä½ç½®: " << pos << endl;
    }
    
    // æŸ¥æ‰¾ä»»æ„å­—ç¬¦
    pos = text.find_first_of("aeiou");
    cout << "ç¬¬ä¸€ä¸ªå…ƒéŸ³åœ¨ä½ç½®: " << pos << endl;
    
    pos = text.find_last_not_of(" \t\n");
    cout << "æœ€åä¸€ä¸ªéç©ºç™½å­—ç¬¦åœ¨ä½ç½®: " << pos << endl;
    
    // å­—ç¬¦ä¸²æ¯”è¾ƒ
    string s1 = "apple";
    string s2 = "banana";
    
    int result = s1.compare(s2);
    if (result < 0) {
        cout << s1 << " < " << s2 << endl;
    } else if (result > 0) {
        cout << s1 << " > " << s2 << endl;
    } else {
        cout << s1 << " == " << s2 << endl;
    }
}
```

---

## 4. å­—ç¬¦ä¸²è½¬æ¢

### 4.1 æ•°å€¼è½¬æ¢
```cpp
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

void number_conversion() {
    // æ•°å­—è½¬å­—ç¬¦ä¸²
    int num = 42;
    double pi = 3.14159;
    
    string str_num = to_string(num);
    string str_pi = to_string(pi);
    
    cout << "æ•´æ•°è½¬å­—ç¬¦ä¸²: " << str_num << endl;
    cout << "æµ®ç‚¹æ•°è½¬å­—ç¬¦ä¸²: " << str_pi << endl;
    
    // å­—ç¬¦ä¸²è½¬æ•°å­—
    string str_int = "123";
    string str_double = "3.14";
    
    int converted_int = stoi(str_int);
    double converted_double = stod(str_double);
    
    cout << "å­—ç¬¦ä¸²è½¬æ•´æ•°: " << converted_int << endl;
    cout << "å­—ç¬¦ä¸²è½¬æµ®ç‚¹æ•°: " << converted_double << endl;
    
    // ä½¿ç”¨stringstreamè¿›è¡Œå¤æ‚è½¬æ¢
    stringstream ss;
    ss << "å¹´é¾„: " << 25 << ", åˆ†æ•°: " << 95.5;
    string complex_str = ss.str();
    cout << "å¤æ‚è½¬æ¢: " << complex_str << endl;
}
```

### 4.2 å¤§å°å†™è½¬æ¢
```cpp
#include <iostream>
#include <string>
#include <algorithm>
#include <cctype>
using namespace std;

void case_conversion() {
    string text = "Hello World 123";
    
    // è½¬æ¢ä¸ºå¤§å†™
    string upper = text;
    transform(upper.begin(), upper.end(), upper.begin(), ::toupper);
    cout << "å¤§å†™: " << upper << endl;
    
    // è½¬æ¢ä¸ºå°å†™
    string lower = text;
    transform(lower.begin(), lower.end(), lower.begin(), ::tolower);
    cout << "å°å†™: " << lower << endl;
    
    // æ‰‹åŠ¨è½¬æ¢
    for (char& c : text) {
        if (islower(c)) c = toupper(c);
        else if (isupper(c)) c = tolower(c);
    }
    cout << "å¤§å°å†™äº’æ¢: " << text << endl;
}
```

---

## 5. å­—ç¬¦ä¸²åˆ†å‰²å’Œè¿æ¥

### 5.1 å­—ç¬¦ä¸²åˆ†å‰²
```cpp
#include <iostream>
#include <string>
#include <vector>
#include <sstream>
using namespace std;

vector<string> split_string(const string& str, char delimiter) {
    vector<string> tokens;
    stringstream ss(str);
    string token;
    
    while (getline(ss, token, delimiter)) {
        if (!token.empty()) {
            tokens.push_back(token);
        }
    }
    
    return tokens;
}

void string_splitting() {
    string text = "apple,banana,cherry,date";
    string csv = "John,Doe,25,New York";
    
    // æŒ‰é€—å·åˆ†å‰²
    vector<string> fruits = split_string(text, ',');
    cout << "æ°´æœåˆ—è¡¨:" << endl;
    for (const auto& fruit : fruits) {
        cout << "- " << fruit << endl;
    }
    
    // æŒ‰ç©ºæ ¼åˆ†å‰²
    string sentence = "The quick brown fox";
    vector<string> words = split_string(sentence, ' ');
    cout << "å•è¯åˆ—è¡¨:" << endl;
    for (const auto& word : words) {
        cout << "- " << word << endl;
    }
}
```

### 5.2 å­—ç¬¦ä¸²è¿æ¥
```cpp
#include <iostream>
#include <string>
#include <vector>
using namespace std;

void string_joining() {
    vector<string> words = {"Hello", "world", "from", "C++"};
    
    // æ–¹æ³•1ï¼šä½¿ç”¨+è¿ç®—ç¬¦
    string result1;
    for (const auto& word : words) {
        result1 += word + " ";
    }
    cout << "æ–¹æ³•1: " << result1 << endl;
    
    // æ–¹æ³•2ï¼šä½¿ç”¨append
    string result2;
    for (const auto& word : words) {
        result2.append(word).append(" ");
    }
    cout << "æ–¹æ³•2: " << result2 << endl;
    
    // æ–¹æ³•3ï¼šä½¿ç”¨stringstream
    stringstream ss;
    for (const auto& word : words) {
        ss << word << " ";
    }
    string result3 = ss.str();
    cout << "æ–¹æ³•3: " << result3 << endl;
}
```

---

## 6. ç°ä»£C++å­—ç¬¦ä¸²ç‰¹æ€§

### 6.1 std::string_viewï¼ˆC++17ï¼‰
```cpp
#include <iostream>
#include <string>
#include <string_view>
using namespace std;

void string_view_demo() {
    string long_text = "This is a very long string that we don't want to copy";
    
    // åˆ›å»ºstring_viewï¼Œä¸å¤åˆ¶æ•°æ®
    string_view view(long_text);
    
    // å¯ä»¥åƒstringä¸€æ ·ä½¿ç”¨
    cout << "é•¿åº¦: " << view.length() << endl;
    cout << "å­ä¸²: " << view.substr(10, 15) << endl;
    
    // æŸ¥æ‰¾æ“ä½œ
    size_t pos = view.find("long");
    if (pos != string_view::npos) {
        cout << "æ‰¾åˆ° 'long' åœ¨ä½ç½®: " << pos << endl;
    }
    
    // string_viewä¸ç®¡ç†å†…å­˜ï¼ŒåŸå§‹å­—ç¬¦ä¸²å¿…é¡»ä¿æŒæœ‰æ•ˆ
}
```

### 6.2 åŸå§‹å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆC++11ï¼‰
```cpp
#include <iostream>
#include <string>
using namespace std;

void raw_string_literals() {
    // ä¼ ç»Ÿå­—ç¬¦ä¸²ï¼ˆéœ€è¦è½¬ä¹‰ï¼‰
    string path1 = "C:\\Program Files\\MyApp\\config.txt";
    string regex1 = "\\d+\\.\\d+";
    
    // åŸå§‹å­—ç¬¦ä¸²ï¼ˆä¸éœ€è¦è½¬ä¹‰ï¼‰
    string path2 = R"(C:\Program Files\MyApp\config.txt)";
    string regex2 = R"(\d+\.\d+)";
    
    // å¤šè¡ŒåŸå§‹å­—ç¬¦ä¸²
    string multi_line = R"(
        #include <iostream>
        using namespace std;
        
        int main() {
            cout << "Hello World" << endl;
            return 0;
        }
    )";
    
    cout << "è·¯å¾„1: " << path1 << endl;
    cout << "è·¯å¾„2: " << path2 << endl;
    cout << "å¤šè¡Œæ–‡æœ¬:\n" << multi_line << endl;
}
```

---

## 7. å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–

### 7.1 é¿å…ä¸å¿…è¦çš„å¤åˆ¶
```cpp
#include <iostream>
#include <string>
using namespace std;

void process_string(const string& str) {  // ä¼ constå¼•ç”¨ï¼Œé¿å…å¤åˆ¶
    cout << "å¤„ç†å­—ç¬¦ä¸²: " << str << endl;
}

void modify_string(string& str) {         // ä¼ å¼•ç”¨ï¼Œå¯ä»¥ä¿®æ”¹
    str += " (modified)";
}

void string_performance() {
    string large_string(1000, 'A');  // åˆ›å»ºå¤§å­—ç¬¦ä¸²
    
    // ä¸å¥½ï¼šä¼šå¤åˆ¶æ•´ä¸ªå­—ç¬¦ä¸²
    // void bad_function(string str);
    
    // å¥½ï¼šä¼ é€’å¼•ç”¨ï¼Œé¿å…å¤åˆ¶
    process_string(large_string);
    
    // å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œä¹Ÿä¼ é€’å¼•ç”¨
    modify_string(large_string);
    cout << "ä¿®æ”¹å: " << large_string << endl;
    
    // ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ï¼ˆC++11ï¼‰
    string moved_string = move(large_string);
    cout << "ç§»åŠ¨ååŸå­—ç¬¦ä¸²: '" << large_string << "'" << endl;  // å¯èƒ½ä¸ºç©º
    cout << "ç§»åŠ¨åæ–°å­—ç¬¦ä¸²: " << moved_string << endl;
}
```

### 7.2 é¢„ç•™ç©ºé—´ä¼˜åŒ–
```cpp
#include <iostream>
#include <string>
#include <chrono>
using namespace std;
using namespace chrono;

void reserve_optimization() {
    // ä¸é¢„ç•™ç©ºé—´
    auto start1 = high_resolution_clock::now();
    string str1;
    for (int i = 0; i < 100000; i++) {
        str1 += "a";  // å¯èƒ½å¯¼è‡´å¤šæ¬¡é‡æ–°åˆ†é…
    }
    auto end1 = high_resolution_clock::now();
    
    // é¢„ç•™ç©ºé—´
    auto start2 = high_resolution_clock::now();
    string str2;
    str2.reserve(100000);  // é¢„å…ˆåˆ†é…è¶³å¤Ÿç©ºé—´
    for (int i = 0; i < 100000; i++) {
        str2 += "a";  // ä¸ä¼šé‡æ–°åˆ†é…
    }
    auto end2 = high_resolution_clock::now();
    
    auto duration1 = duration_cast<microseconds>(end1 - start1);
    auto duration2 = duration_cast<microseconds>(end2 - start2);
    
    cout << "ä¸é¢„ç•™æ—¶é—´: " << duration1.count() << " Î¼s" << endl;
    cout << "é¢„ç•™æ—¶é—´: " << duration2.count() << " Î¼s" << endl;
    cout << "æ€§èƒ½æå‡: " << (duration1.count() - duration2.count()) << " Î¼s" << endl;
}
```

---

## 8. å®é™…åº”ç”¨ç¤ºä¾‹

### 8.1 é…ç½®æ–‡ä»¶è§£æ
```cpp
#include <iostream>
#include <string>
#include <map>
#include <sstream>
#include <fstream>
using namespace std;

map<string, string> parse_config(const string& filename) {
    map<string, string> config;
    ifstream file(filename);
    
    if (!file.is_open()) {
        throw runtime_error("æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶");
    }
    
    string line;
    while (getline(file, line)) {
        // è·³è¿‡ç©ºè¡Œå’Œæ³¨é‡Š
        if (line.empty() || line[0] == '#') continue;
        
        size_t pos = line.find('=');
        if (pos != string::npos) {
            string key = line.substr(0, pos);
            string value = line.substr(pos + 1);
            
            // å»é™¤å‰åç©ºç™½
            key.erase(0, key.find_first_not_of(" \t"));
            key.erase(key.find_last_not_of(" \t") + 1);
            
            value.erase(0, value.find_first_not_of(" \t"));
            value.erase(value.find_last_not_of(" \t") + 1);
            
            config[key] = value;
        }
    }
    
    return config;
}
```

### 8.2 å­—ç¬¦ä¸²åŠ å¯†è§£å¯†
```cpp
#include <iostream>
#include <string>
using namespace std;

string caesar_cipher(const string& text, int shift) {
    string result;
    
    for (char c : text) {
        if (isalpha(c)) {
            char base = islower(c) ? 'a' : 'A';
            c = (c - base + shift) % 26;
            if (c < 0) c += 26;
            result += base + c;
        } else {
            result += c;
        }
    }
    
    return result;
}

void encryption_demo() {
    string original = "Hello, World! 123";
    int shift = 3;
    
    string encrypted = caesar_cipher(original, shift);
    string decrypted = caesar_cipher(encrypted, -shift);
    
    cout << "åŸæ–‡: " << original << endl;
    cout << "åŠ å¯†: " << encrypted << endl;
    cout << "è§£å¯†: " << decrypted << endl;
}
```

---

## 9. æœ€ä½³å®è·µæ€»ç»“

### 9.1 å­—ç¬¦ä¸²å¤„ç†æœ€ä½³å®è·µ
```cpp
#include <iostream>
#include <string>
#include <string_view>
using namespace std;

void best_practices() {
    // 1. ä¼˜å…ˆä½¿ç”¨std::stringè€Œä¸æ˜¯Cé£æ ¼å­—ç¬¦ä¸²
    string modern_str = "Modern C++";
    
    // 2. å¯¹äºåªè¯»è®¿é—®ï¼Œä½¿ç”¨string_viewï¼ˆC++17ï¼‰
    string_view view = modern_str;
    
    // 3. é¿å…ä¸å¿…è¦çš„å­—ç¬¦ä¸²å¤åˆ¶
    void process_string(const string& str);  // ä½¿ç”¨constå¼•ç”¨
    
    // 4. é¢„å…ˆåˆ†é…ç©ºé—´é¿å…é‡å¤åˆ†é…
    string large_str;
    large_str.reserve(1000);
    
    // 5. ä½¿ç”¨ç°ä»£è½¬æ¢å‡½æ•°
    int num = stoi("42");
    string str_num = to_string(42);
    
    // 6. æ­£ç¡®å¤„ç†Unicodeï¼ˆå¦‚æœéœ€è¦ï¼‰
    u16string utf16_str = u"ä½ å¥½ä¸–ç•Œ";
    u32string utf32_str = U"ğŸ˜Š";
    
    // 7. ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å­—é¢é‡å¤„ç†å¤æ‚æ–‡æœ¬
    string regex = R"(\d+\.\d+)";
    string path = R"(C:\Program Files\MyApp)";
}
```

### 9.2 å†…å­˜å®‰å…¨å®è·µ
```cpp
#include <iostream>
#include <string>
#include <memory>
using namespace std;

void memory_safety() {
    // ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†Cé£æ ¼å­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦ï¼‰
    unique_ptr<char[]> c_str(new char[100]);
    strcpy(c_str.get(), "Safe C string");
    
    // æˆ–è€…ç›´æ¥ä½¿ç”¨std::string
    string safe_str = "æ›´å®‰å…¨çš„å­—ç¬¦ä¸²";
    
    // é¿å…ç¼“å†²åŒºæº¢å‡º
    char buffer[10];
    string input;
    getline(cin, input);
    
    // å®‰å…¨å¤åˆ¶
    if (input.size() < sizeof(buffer)) {
        strcpy(buffer, input.c_str());
    } else {
        cerr << "è¾“å…¥è¿‡é•¿ï¼" << endl;
    }
    
    // æˆ–è€…ç›´æ¥ä½¿ç”¨std::stringï¼Œé¿å…è¿™äº›é—®é¢˜
}
```

---

## æ€»ç»“

C++å­—ç¬¦ä¸²å¤„ç†çš„å…³é”®è¦ç‚¹ï¼š

1. **å¤šç§é€‰æ‹©**ï¼šCé£æ ¼å­—ç¬¦ä¸²ã€`std::string`ã€å„ç§Unicodeå­—ç¬¦ä¸²
2. **ä¸°å¯ŒåŠŸèƒ½**ï¼šæŸ¥æ‰¾ã€æ›¿æ¢ã€åˆ†å‰²ã€è¿æ¥ã€è½¬æ¢ç­‰
3. **æ€§èƒ½è€ƒè™‘**ï¼šé¢„ç•™ç©ºé—´ã€é¿å…å¤åˆ¶ã€ä½¿ç”¨`string_view`
4. **ç°ä»£ç‰¹æ€§**ï¼šåŸå§‹å­—ç¬¦ä¸²ã€ç§»åŠ¨è¯­ä¹‰ã€å­—ç¬¦ä¸²è§†å›¾
5. **å®‰å…¨ç¬¬ä¸€**ï¼šé¿å…ç¼“å†²åŒºæº¢å‡ºï¼Œä½¿ç”¨ç°ä»£å­—ç¬¦ä¸²ç±»

