好的，我们来详细介绍一下 C++ 中的**默认参数（Default Arguments）**。

### 什么是默认参数？

默认参数是函数声明中为参数指定的一个默认值。如果在调用该函数时没有为这个参数提供实参，那么编译器就会自动使用这个默认值。

### 基本语法

在函数声明中，通过在参数类型后使用 `= default_value` 来指定默认参数。

```cpp
// 函数声明
return_type function_name(type param1, type param2 = default_value);

// 函数定义（注意：默认值通常在声明中指定，而非定义）
return_type function_name(type param1, type param2) {
    // ... 函数体
}
```

### 一个简单的例子

```cpp
#include <iostream>

// 声明函数，并为参数 'b' 提供默认值 10
void printNumber(int a, int b = 10);

int main() {
    printNumber(5, 20); // 调用：提供两个参数，输出 5 和 20
    printNumber(7);     // 调用：只提供一个参数，b 使用默认值 10，输出 7 和 10

    return 0;
}

// 函数定义（注意：这里不再重复默认值）
void printNumber(int a, int b) {
    std::cout << "a is: " << a << ", b is: " << b << std::endl;
}
```

输出：
```
a is: 5, b is: 20
a is: 7, b is: 10
```

---

### 关键规则和特点

1. **从右向左设置（Rightmost Rule）**
   默认参数必须从参数列表的**最右边**开始，连续地设置。你不能为左边的参数指定默认值，而不为它右边的所有参数指定默认值。

   **正确 ✅:**
   ```cpp
   void func(int a, int b = 5, int c = 10); // 正确
   void func(int a, int b, int c = 10);      // 正确
   ```

   **错误 ❌:**
   ```cpp
   void func(int a = 5, int b, int c);       // 错误：a 有默认值，但中间的 b 没有
   void func(int a = 5, int b, int c = 10);  // 错误：a 有默认值，但紧接着的 b 没有
   ```
   这条规则的存在是为了避免函数调用时的歧义。例如，对于 `func(1, , 3)` 这样的调用，C++ 语法是不允许的。

2. **声明与定义**
   **默认参数通常在函数声明中指定，而不是在定义中。**

   **声明和定义中最多只有一个地方有默认参数**

    最好将默认参数放在头文件（.hpp / .h）中的函数声明里。

   **正确 ✅ (推荐):**
   **myfunctions.h**
   ```cpp
   // 在头文件的声明中指定默认参数
   void myFunction(int x, double y = 20.0);
   ```
   **myfunctions.cpp**
   ```cpp
   // 在定义中不再指定默认值
   #include "myfunctions.h"
   void myFunction(int x, double y) {
       // ... 函数体
   }
   ```

   **错误 ❌ (可能导致编译错误):**
   ```cpp
   // 声明中没有默认值
   void myFunction(int x, double y);
   
   // 在定义中尝试添加默认值（这是不允许的）
   void myFunction(int x, double y = 20.0) { // 编译错误：重定义默认参数
       // ... 函数体
   }
   ```
   如果一个函数在多个地方被声明（例如在多个头文件中），**所有声明中为同一参数指定的默认值必须相同**。

3. **默认参数与函数重载**
   默认参数可以看作是函数重载的一种简化形式。但它们的使用可能会带来一些歧义。

   例如，下面的代码会产生歧义：
   ```cpp
   void drawCircle(int radius);
   void drawCircle(int radius, int color = 0); // 默认参数
   
   int main() {
       drawCircle(10); // 错误：歧义调用
       // 编译器不知道应该调用第一个函数（完美匹配）
       // 还是调用第二个函数（使用默认参数，也是完美匹配）
       return 0;
   }
   ```
   在这种情况下，使用函数重载而不是默认参数会更安全。

4. **默认参数可以是表达式**
   默认值可以是常量、全局变量、甚至函数调用等表达式。**但不能是局部变量**。

   ```cpp
   int defaultVal() { return 5; }
   int globalVar = 10;
   
   void func(int a = globalVar);           // OK：全局变量
   void func2(int b = defaultVal());       // OK：函数调用
   void func3(int c = sizeof(int) * 2);    // OK：常量表达式
   
   void badExample() {
       int localVar = 15;
       // void func4(int d = localVar);    // 错误：不能使用局部变量
   }
   ```
   注意：用作默认参数的函数或变量必须在函数声明处是可见的。

---

### 何时使用默认参数？

默认参数在以下场景非常有用：

*   **提供常用值**：某个参数在大部分情况下都有一个特定的值，你希望让调用者在常见情况下写更少的代码。
    ```cpp
    void log(const std::string& message, bool timestamp = true);
    // 通常都需要时间戳，特殊情况下才不需要
    ```

*   **扩展函数功能而不破坏现有代码**：当你希望给一个已存在的函数增加一个新的可选功能时，可以添加一个带有默认值的新参数。这样所有现有的函数调用代码都无需修改即可继续工作。
    ```cpp
    // 旧函数：void createWindow(int width, int height);
    // 新版本，添加全屏选项，默认为 false（不全屏）
    void createWindow(int width, int height, bool fullscreen = false);
    ```

### 总结

| 特点       | 描述                                               |
| :--------- | :------------------------------------------------- |
| **语法**   | `return_type func(type param = default_value);`    |
| **规则**   | 必须从**右向左**连续设置                           |
| **位置**   | 通常在**函数声明**（头文件中）指定，而非定义       |
| **优势**   | 简化常用情况的函数调用，向后兼容                   |
| **注意**   | 避免与函数重载产生歧义                             |
| **默认值** | 可以是常量、全局变量、函数调用等（不能是局部变量） |

希望这个详细的介绍能帮助你彻底理解 C++ 中的默认参数！