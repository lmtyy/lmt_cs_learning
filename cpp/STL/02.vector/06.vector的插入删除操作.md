好的，我们来详细讲解一下 C++ `vector` 中的插入和删除操作。`vector` 是一个动态数组，它能够自动处理内存，在尾部插入和删除效率很高，但在中间或头部操作则效率较低。

### 包含必要头文件
首先，确保包含了 `<vector>` 和 `<iostream>`（用于演示输出）。
```cpp
#include <iostream>
#include <vector>
using namespace std;
```

---

## 一、插入操作

`vector` 提供了多种插入元素的方法，主要使用 `insert()` 函数。

### 1. 在尾部插入 - `push_back()`
这是最常用、最高效的插入方式，因为不会导致大量元素的移动。
```cpp
vector<int> vec = {1, 2, 3};
vec.push_back(4); // 在末尾添加元素 4
// 现在 vec = {1, 2, 3, 4}
```

### 2. 在指定位置插入单个元素 - `insert(iterator, value)`
需要一个迭代器来指定位置。
```cpp
vector<int> vec = {1, 2, 4};
auto it = vec.begin() + 2; // 指向第三个元素（值为4）的位置
vec.insert(it, 3); // 在位置 2 插入 3
// 现在 vec = {1, 2, 3, 4}
```

### 3. 在指定位置插入多个相同元素 - `insert(iterator, count, value)`
```cpp
vector<int> vec = {1, 5};
vec.insert(vec.begin() + 1, 3, 2); // 在位置 1 插入 3 个 2
// 现在 vec = {1, 2, 2, 2, 5}
```

### 4. 插入另一个容器（或数组）的元素 - `insert(iterator, first, last)`
可以从数组、另一个 `vector`、`list` 等插入一段元素。
```cpp
vector<int> vec = {1, 5};
int arr[] = {2, 3, 4};
vec.insert(vec.begin() + 1, arr, arr + 3); // 插入数组的 [arr, arr+3) 区间
// 现在 vec = {1, 2, 3, 4, 5}

// 或者从另一个 vector 插入
vector<int> vec2 = {10, 20};
vec.insert(vec.end(), vec2.begin(), vec2.end()); // 在末尾插入 vec2 的所有元素
// 现在 vec = {1, 2, 3, 4, 5, 10, 20}
```

### 5. 使用初始化列表插入 - `insert(iterator, {initializer_list})`
```cpp
vector<int> vec = {1, 5};
vec.insert(vec.begin() + 1, {2, 3, 4}); // 直接使用花括号列表
// 现在 vec = {1, 2, 3, 4, 5}
```

---

## 二、删除操作

`vector` 提供了多种删除元素的方法。

### 1. 删除尾部元素 - `pop_back()`
高效，只是减少容器大小。
```cpp
vector<int> vec = {1, 2, 3};
vec.pop_back(); // 删除最后一个元素
// 现在 vec = {1, 2}
```

### 2. 删除指定位置的一个元素 - `erase(iterator)`
```cpp
vector<int> vec = {1, 2, 3, 4};
vec.erase(vec.begin() + 1); // 删除第二个元素（值为2）
// 现在 vec = {1, 3, 4}
```

### 3. 删除一个区间内的所有元素 - `erase(first, last)`
删除 `[first, last)` 区间的元素。
```cpp
vector<int> vec = {1, 2, 3, 4, 5};
vec.erase(vec.begin() + 1, vec.begin() + 3); // 删除位置 1 到 2 的元素（2 和 3）
// 现在 vec = {1, 4, 5}
```

### 4. 删除所有元素 - `clear()`
清空整个 `vector`。
```cpp
vector<int> vec = {1, 2, 3};
vec.clear(); // 清空所有元素
// 现在 vec 为空，size() 为 0
```

---

## 三、综合示例代码

下面是一个完整的示例，演示了上述所有操作：

```cpp
#include <iostream>
#include <vector>
using namespace std;

// 辅助函数，用于打印 vector
void printVector(const vector<int>& v) {
    for (int num : v) {
        cout << num << " ";
    }
    cout << endl;
}

int main() {
    vector<int> vec;

    // ========== 插入操作 ==========
    cout << "=== 插入操作 ===" << endl;

    // 1. push_back
    vec.push_back(1);
    vec.push_back(2);
    vec.push_back(3);
    cout << "push_back 后: ";
    printVector(vec); // 1 2 3

    // 2. 在指定位置插入单个元素
    vec.insert(vec.begin() + 2, 99); // 在第三个位置插入 99
    cout << "在位置2插入99后: ";
    printVector(vec); // 1 2 99 3

    // 3. 插入多个相同元素
    vec.insert(vec.end(), 2, 100); // 在末尾插入 2 个 100
    cout << "插入2个100后: ";
    printVector(vec); // 1 2 99 3 100 100

    // 4. 插入另一个数组的元素
    int arr[] = {7, 8, 9};
    vec.insert(vec.begin(), arr, arr + 2); // 在开头插入数组的前两个元素
    cout << "插入数组元素后: ";
    printVector(vec); // 7 8 1 2 99 3 100 100

    // 5. 使用初始化列表插入
    vec.insert(vec.begin() + 3, {-1, -2}); // 在位置3插入两个负数
    cout << "使用初始化列表插入后: ";
    printVector(vec); // 7 8 1 -1 -2 2 99 3 100 100

    // ========== 删除操作 ==========
    cout << "\n=== 删除操作 ===" << endl;

    // 1. pop_back
    vec.pop_back();
    cout << "pop_back 后: ";
    printVector(vec); // 7 8 1 -1 -2 2 99 3 100

    // 2. 删除指定位置元素
    vec.erase(vec.begin() + 1); // 删除第二个元素 (8)
    cout << "删除位置1的元素后: ";
    printVector(vec); // 7 1 -1 -2 2 99 3 100

    // 3. 删除一个区间
    vec.erase(vec.begin() + 2, vec.begin() + 5); // 删除位置2到4的元素 (-1, -2, 2)
    cout << "删除区间[2,5)后: ";
    printVector(vec); // 7 1 99 3 100

    // 4. clear
    vec.clear();
    cout << "clear 后，vector 大小: " << vec.size() << endl; // 0
    cout << "内容: ";
    printVector(vec); // (空行)

    return 0;
}
```

### 输出结果：
```
=== 插入操作 ===
push_back 后: 1 2 3 
在位置2插入99后: 1 2 99 3 
插入2个100后: 1 2 99 3 100 100 
插入数组元素后: 7 8 1 2 99 3 100 100 
使用初始化列表插入后: 7 8 1 -1 -2 2 99 3 100 100 

=== 删除操作 ===
pop_back 后: 7 8 1 -1 -2 2 99 3 100 
删除位置1的元素后: 7 1 -1 -2 2 99 3 100 
删除区间[2,5)后: 7 1 99 3 100 
clear 后，vector 大小: 0
内容: 
```

---

## 四、重要注意事项

1.  **迭代器失效**：在进行插入或删除操作后，指向 `vector` 的迭代器、指针和引用可能会失效。特别是：
    *   **插入**：如果插入导致重新分配内存（容量不足），所有迭代器都会失效。如果没有重新分配，则插入点之后的所有迭代器失效。
    *   **删除**：被删除元素及其之后的所有迭代器都会失效。
    *   **最佳实践**：在插入或删除操作后，如果需要继续使用迭代器，最好重新获取。

2.  **效率考量**：
    *   `push_back()` 和 `pop_back()` 是 **O(1)** 操作（平摊时间）。
    *   在中间或头部进行 `insert()` 和 `erase()` 是 **O(n)** 操作，因为需要移动后续元素。

3.  **`emplace_back` 和 `emplace`**：C++11 引入了更高效的构造插入方法，可以直接在容器内存中构造对象，避免不必要的拷贝或移动。例如 `vec.emplace_back(10)` 比 `vec.push_back(10)` 对于复杂对象更高效。

希望这个详细的讲解和示例代码能帮助你全面理解 `vector` 的插入和删除操作！