# Java 中类似 C 语言 EOF 的处理方式

在 Java 中，没有与 C 语言完全相同的 `EOF` (End Of File) 常量，但有几种等效的方法来处理输入结束的情况。

## 主要区别和方法

### 1. 与 C 语言 EOF 的主要区别

C 语言的 `EOF` 是一个特殊常量（通常是 `-1`），而 Java 使用不同的机制：

| 特性        | C 语言                     | Java                           |
|------------|---------------------------|--------------------------------|
| 表示方式     | `#define EOF (-1)`         | 通过异常或返回值检测              |
| 检测方式     | `feof()` 或返回值比较       | 异常捕获或方法返回值              |
| 典型使用场景 | `while((c=getchar())!=EOF)` | `while(scanner.hasNext())`      |

### 2. Java 中处理输入结束的常用方法

#### (1) 使用 Scanner 类

```java
Scanner sc = new Scanner(System.in);
while (sc.hasNext()) {  // 检查是否有更多输入
    String line = sc.nextLine();
    // 处理输入...
}
sc.close();
```

#### (2) 使用 BufferedReader

```java
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
String line;
while ((line = br.readLine()) != null) {  // null 表示输入结束
    // 处理输入...
}
br.close();
```

#### (3) 读取文件时的 EOF 处理

```java
try (BufferedReader br = new BufferedReader(new FileReader("file.txt"))) {
    String line;
    while ((line = br.readLine()) != null) {
        // 处理每一行
    }
} catch (IOException e) {
    e.printStackTrace();
}
```

### 3. 标准输入的特殊情况

对于标准输入(System.in)，不同环境下的EOF信号：

- **命令行/终端**：通常按 `Ctrl+D` (Unix/Linux) 或 `Ctrl+Z` (Windows)
- **IDE**：可能有特殊配置或输入窗口

### 4. 低级读取的EOF检测

如果需要像C语言那样逐个字符读取：

```java
InputStream in = System.in;
int byteRead;
while ((byteRead = in.read()) != -1) {  // -1 类似于C的EOF
    char c = (char) byteRead;
    // 处理字符...
}
```

## 完整示例

### 示例1：类似C的字符读取方式

```java
import java.io.*;

public class EOFExample {
    public static void main(String[] args) throws IOException {
        InputStream in = System.in;
        System.out.println("输入内容 (Ctrl+D/Ctrl+Z结束):");
        
        int count = 0;
        int byteRead;
        while ((byteRead = in.read()) != -1) {
            count++;
            System.out.print((char)byteRead);
        }
        
        System.out.println("\n总共读取了 " + count + " 个字符");
    }
}
```

### 示例2：更Java风格的Scanner方式

```java
import java.util.Scanner;

public class ScannerEOFExample {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.println("输入多行内容 (空行或EOF结束):");
        
        while (sc.hasNextLine()) {
            String line = sc.nextLine();
            if (line.isEmpty()) break;  // 空行退出
            System.out.println("你输入了: " + line);
        }
        
        sc.close();
        System.out.println("输入结束");
    }
}
```

## 注意事项

1. **资源释放**：确保关闭输入流或扫描器（使用try-with-resources最佳）
2. **阻塞问题**：某些方法如 `read()` 会阻塞等待输入
3. **编码问题**：处理文本时注意字符编码
4. **性能考虑**：对于大量数据，BufferedReader比Scanner更高效

Java的这种设计虽然与C语言不同，但更符合面向对象的原则，通过异常和明确的API方法来处理边界条件，而不是依赖特殊常量值。