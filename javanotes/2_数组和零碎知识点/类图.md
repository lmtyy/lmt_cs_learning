# 类图(Class Diagram)详解

类图是统一建模语言(UML)中最常用的结构图之一，用于描述系统中类的静态结构，包括类本身的定义、类的属性、方法以及类与类之间的关系。

## 一、类图的基本组成

### 1. 类的表示
类在类图中用矩形表示，分为三层：
```
──────────────────────
│      类名          │
├─────────────────────
│    属性(字段)      │
├─────────────────────
│    方法(操作)      │
──────────────────────
```

示例：
```
──────────────────────
│      Person        │
├─────────────────────
│ - name : String    │
│ - age : int        │
├─────────────────────
│ + getName(): String│
│ + setName(String)  │
──────────────────────
```

### 2. 类成员的可见性符号
- `+` public (公共)
- `-` private (私有)
- `#` protected (保护)
- `~` package/default (包/默认)

## 二、类之间的关系

### 1. 关联关系(Association)
表示类之间的长期结构关系，用实线表示。

示例：学生和课程之间的多对多关系
```
[Student] ────── [Course]
```

### 2. 继承/泛化关系(Inheritance/Generalization)
表示"is-a"关系，用空心三角形箭头表示。

示例：
```
[Animal] ▲
         │
   ┌─────┴─────┐
 [Dog]      [Cat]
```

### 3. 实现关系(Realization)
表示类与接口的关系，用虚线空心三角形箭头表示。

示例：
```
«interface» 
[Runnable] ╌▲╌╌╌
            ║ 
       [MyThread]
```

### 4. 依赖关系(Dependency)
表示临时性的使用关系，用虚线箭头表示。

示例：
```
[Client] ╌╌╌╌> [Service]
```

### 5. 聚合关系(Aggregation)
表示"has-a"关系，整体与部分可独立存在，用空心菱形箭头表示。

示例：
```
[Department] ◇──> [Professor]
```

### 6. 组合关系(Composition)
表示更强的"contains-a"关系，部分不能脱离整体存在，用实心菱形箭头表示。

示例：
```
[House] ◆──> [Room]
```

## 三、类图的进阶元素

### 1. 接口表示
```
«interface» 
[Drawable]
```

### 2. 抽象类表示
```
«abstract» 
[Shape]
```

### 3. 静态成员
在成员下加下划线：
```
+ MAX_SIZE : int
```

### 4. 泛型类
```
[Box<T>]
│
├─────────────────────
│ - content : T
├─────────────────────
│ + setContent(T)
│ + getContent() : T
```

## 四、类图的绘制原则

1. **抽象与简化**：只展示当前关注的相关类和关系
2. **层次清晰**：重要类放在中心，相关类围绕周围
3. **命名规范**：类名首字母大写，属性/方法首字母小写
4. **避免交叉**：尽量减少连接线的交叉
5. **一致性**：保持全图符号风格一致

## 五、类图的实际应用场景

1. **系统设计阶段**：描述系统静态结构
2. **文档编写**：作为技术文档的组成部分
3. **代码生成**：许多IDE支持从类图生成代码框架
4. **逆向工程**：从现有代码生成类图帮助理解
5. **团队沟通**：作为开发人员之间的设计交流工具

## 六、类图示例：简单电商系统

```
«interface» 
[PaymentStrategy] ▲
         ║
   ┌─────╨─────┐
[CreditCard] [PayPal]
    │
    ║
[Order] ◇──> [OrderItem]
 │
 ║
[Customer] 
```

这个类图展示了：
- PaymentStrategy接口有两个实现类
- Order与OrderItem是组合关系
- Order与PaymentStrategy是依赖关系
- Order与Customer是关联关系

类图是面向对象分析和设计的重要工具，通过可视化类及其关系，可以帮助开发者更好地理解和设计系统架构。掌握类图的绘制和解读能力是软件工程师的基本技能之一。