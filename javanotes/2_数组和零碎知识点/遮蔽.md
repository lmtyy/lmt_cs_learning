### **Java 变量遮蔽（Shadowing）规则总结**
在 Java 中，变量遮蔽发生在不同作用域的同名变量之间，主要分为 **成员变量 vs. 局部变量** 和 **局部变量 vs. 代码块变量** 两种情况。  

---

## **1. 成员变量 vs. 局部变量（方法内变量）**
### **规则**
- 如果 **局部变量** 和 **成员变量（实例变量或静态变量）** 同名：
  - 在方法内部，局部变量会 **遮蔽（Shadow）** 成员变量。
  - 直接使用变量名时，访问的是 **局部变量**。
  - 如果需要访问被遮蔽的成员变量：
    - 实例变量 → `this.变量名`（如 `this.x`）
    - 静态变量 → `类名.变量名`（如 `MyClass.staticVar`）

### **示例**
```java
public class Test {
    int x = 10; // 成员变量

    void printX() {
        int x = 20; // 局部变量遮蔽成员变量
        System.out.println(x);      // 20（局部变量）
        System.out.println(this.x); // 10（成员变量）
    }
}
```
**输出**：
```
20
10
```

### **关键点**
✅ **局部变量优先**，但成员变量仍然存在（可通过 `this` 访问）。  
✅ **仅限于方法内部**，方法外部仍然访问的是成员变量。  
❌ **不能重复定义同名局部变量**（如方法内不能有两个 `int x`）。  

---

## **2. 局部变量 vs. 代码块变量（`{}`、`if`、`for`、`while` 等）**
### **规则**
- **同一方法作用域内**：
  - **不能重复定义同名局部变量**（即使在不同代码块内），否则编译错误。  
  - 例如：
    ```java
    void myMethod() {
        int x = 10;
        if (true) {
            int x = 20; // 编译错误！x 已定义
        }
    }
    ```
- **不同方法作用域**：
  - 不同方法可以定义同名变量（互不影响）。  
  - 例如：
    ```java
    void method1() { int x = 10; }
    void method2() { int x = 20; } // 允许，不同方法
    ```
- **代码块内可以定义新变量**：
  - 只要变量名**在代码块外未定义**，就可以使用：
    ```java
    void myMethod() {
        {
            int y = 30; // 允许，y 是新变量
        }
        // System.out.println(y); // 错误，y 只在代码块内有效
    }
    ```

### **示例**
```java
public class BlockExample {
    public static void main(String[] args) {
        int x = 10; // 方法局部变量
        
        {
            // int x = 20; // 编译错误！x 已定义
            int y = 30; // 允许，y 是新变量
            System.out.println(y); // 30
        }
        
        // System.out.println(y); // 错误，y 只在代码块内有效
        System.out.println(x); // 10
    }
}
```
**输出**：
```
30
10
```

### **关键点**
✅ **代码块内可以定义新变量**（只要外层没有同名变量）。  
❌ **同一方法作用域内不能重复定义变量**（即使在不同代码块内）。  
✅ **不同方法可以定义同名变量**（作用域不同）。  

---

## **总结对比表**
| **场景** | **是否允许遮蔽** | **如何访问被遮蔽的变量** | **示例** |
|----------|----------------|----------------|----------|
| **成员变量 vs. 局部变量** | ✅ 允许 | `this.变量名`（实例变量）<br>`类名.变量名`（静态变量） | `this.x` |
| **局部变量 vs. 代码块变量** | ❌ 不允许（同一方法作用域） | 无法访问（编译错误） | `int x = 10; { int x = 20; }` ❌ |
| **不同方法的局部变量** | ✅ 允许 | 互不影响 | `method1() { int x; }`<br>`method2() { int x; }` ✅ |

---

## **最佳实践**
1. **避免变量名遮蔽**，以提高代码可读性。  
2. **尽量使用不同的变量名**，减少 `this` 的使用。  
3. **注意变量的作用域**，避免在代码块内重复定义变量。  

这样能写出更清晰、更少错误的 Java 代码！ 🚀