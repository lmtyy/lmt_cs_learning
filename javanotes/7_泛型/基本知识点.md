# Java 泛型知识点总结

泛型(Generics)是Java 5引入的重要特性，它提供了编译时类型安全检测机制，允许程序员在编译时检测到非法的类型。

## 一、泛型基础

### 1. 泛型类
```java
// 定义泛型类
public class Box<T> {
    private T t;
    
    public void set(T t) { this.t = t; }
    public T get() { return t; }
}

// 使用
Box<Integer> integerBox = new Box<Integer>();
integerBox.set(10);
Integer value = integerBox.get();
```

### 2. 泛型接口
```java
public interface Generator<T> {
    T next();
}

// 实现泛型接口
public class FruitGenerator<T> implements Generator<T> {
    @Override
    public T next() {
        return null;
    }
}
```

### 3. 泛型方法
```java
public <T> void printArray(T[] inputArray) {
    for (T element : inputArray) {
        System.out.printf("%s ", element);
    }
}

// 调用
Integer[] intArray = {1, 2, 3};
printArray(intArray);
```

## 二、类型通配符

### 1. 无界通配符
```java
public void process(List<?> list) {
    // 可以读取，但不能写入（除了null）
    for (Object obj : list) {
        System.out.println(obj);
    }
}
```

### 2. 上界通配符
```java
public static double sumOfList(List<? extends Number> list) {
    double sum = 0.0;
    for (Number num : list) {
        sum += num.doubleValue();
    }
    return sum;
}
```

### 3. 下界通配符
```java
public static void addNumbers(List<? super Integer> list) {
    for (int i = 1; i <= 10; i++) {
        list.add(i);
    }
}
```

## 三、泛型约束与特性

### 1. 类型擦除
Java泛型是通过类型擦除实现的，编译时类型信息会被擦除：
```java
List<String> list1 = new ArrayList<>();
List<Integer> list2 = new ArrayList<>();
// 运行时 list1.getClass() == list2.getClass() 为 true
```

### 2. 泛型数组的限制
不能直接创建泛型数组：
```java
// 错误写法
List<String>[] listArray = new List<String>[10];
```

### 3. 泛型与继承
泛型类之间没有继承关系：
```java
List<Object> list = new ArrayList<String>(); // 编译错误
```

## 四、高级特性

### 1. 多重限定
```java
<T extends Comparable & Serializable>
```

### 2. 泛型与静态
静态方法不能使用类的泛型参数：
```java
public class Test<T> {
    // 错误写法
    public static void test(T t) {}
    
    // 正确写法
    public static <E> void test(E e) {}
}
```

### 3. 泛型与异常
不能抛出或捕获泛型类的实例：
```java
// 错误写法
try {
    // ...
} catch (MyException<T> e) {
    // ...
}
```

## 五、Java 7/8/9对泛型的改进

1. 钻石语法（Java 7）：
```java
List<String> list = new ArrayList<>();
```

2. 改进的类型推断（Java 8）：
```java
// 可以省略方法调用时的类型参数
process(new ArrayList<>());
```

3. 匿名类钻石操作符（Java 9）：
```java
List<String> list = new ArrayList<>() {};
```

泛型是Java类型安全的重要机制，合理使用可以减少类型转换，提高代码的可读性和安全性。