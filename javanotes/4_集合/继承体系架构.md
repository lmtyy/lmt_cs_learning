# Java集合类的继承体系架构

Java集合框架(Java Collections Framework)采用清晰的接口继承层次和类实现结构，下面我将详细讲解集合类的继承骨架。

## 1. 集合框架的整体架构

Java集合框架主要分为两大分支：
- **Collection接口** - 表示一组对象
- **Map接口** - 表示键值对映射

```
              集合框架根接口
                  |
       -------------------------
       |                       |
   Collection                Map
       |                       |
  -----------------      -------------
 |       |       |      |     |     |
List    Set    Queue   HashMap TreeMap ...
```

## 2. Collection接口继承体系

### 2.1 Collection接口核心继承关系

```
            Iterable (接口)
                ↑
           Collection (接口)
                ↑
    -------------------------
    |           |           |
  List        Set         Queue (接口)
    |           |           ↑
    |           |      Deque (接口)
    |           |
  ArrayList  HashSet
  LinkedList LinkedHashSet
  Vector     TreeSet
  Stack
```

### 2.2 详细说明

1. **Iterable接口**
   - 顶级接口，提供迭代器功能
   - 定义方法：`Iterator<T> iterator()`

2. **Collection接口** (extends Iterable)
   - 集合层次结构的根接口
   - 基本操作：add(), remove(), size(), isEmpty(), contains()等

3. **List接口** (extends Collection)
   - 有序集合(序列)
   - 允许重复元素
   - 主要实现类：
     - **ArrayList**：动态数组实现
     - **LinkedList**：双向链表实现
     - **Vector**：线程安全的动态数组(已过时)
     - **Stack**：继承自Vector(已过时)

4. **Set接口** (extends Collection)
   - 不允许重复元素
   - 主要实现类：
     - **HashSet**：基于哈希表
     - **LinkedHashSet**：保持插入顺序的HashSet
     - **TreeSet**：基于红黑树，保持排序

5. **Queue接口** (extends Collection)
   - 队列数据结构
   - 子接口**Deque**：双端队列
   - 主要实现类：
     - **LinkedList**：也实现了Deque
     - **PriorityQueue**：优先级队列
     - **ArrayDeque**：基于数组的双端队列

## 3. Map接口继承体系

### 3.1 Map接口核心继承关系

```
           Map (接口)
             ↑
    ---------------------
    |         |         |
 HashMap  TreeMap  Hashtable
    |
 LinkedHashMap
```

### 3.2 详细说明

1. **Map接口**
   - 表示键值对映射
   - 不是Collection的子接口
   - 基本操作：put(), get(), remove(), keySet(), values()等

2. 主要实现类：
   - **HashMap**：基于哈希表，无序
   - **LinkedHashMap**：保持插入顺序或访问顺序
   - **TreeMap**：基于红黑树，按键排序
   - **Hashtable**：线程安全的Map实现(已过时)

## 4. 重要抽象类

在接口和具体实现类之间，还有一些抽象类：

- **AbstractCollection** - 实现Collection接口的基本功能
- **AbstractList** - 实现List接口的骨架
- **AbstractSet** - 实现Set接口的骨架
- **AbstractMap** - 实现Map接口的骨架

这些抽象类提供了部分实现，减少了具体实现类的工作量。

## 5. 集合框架设计特点

1. **接口与实现分离**
   - 如List是接口，ArrayList是实现

2. **泛型支持**
   - 从Java 5开始全面支持泛型

3. **算法复用**
   - Collections工具类提供静态方法(sort, binarySearch等)

4. **扩展性**
   - 可以轻松实现自定义集合类

## 6. 继承体系示例代码

```java
// Collection示例
Collection<String> collection = new ArrayList<>();
collection.add("item");

// List示例
List<String> list = new LinkedList<>();
list.add(0, "first");

// Set示例
Set<Integer> set = new HashSet<>();
set.add(1);

// Queue示例
Queue<String> queue = new PriorityQueue<>();
queue.offer("task");

// Map示例
Map<String, Integer> map = new HashMap<>();
map.put("key", 10);
```

## 7. 选择实现类的考虑因素

1. **List的选择**：
   - 需要快速随机访问 → ArrayList
   - 频繁插入删除 → LinkedList

2. **Set的选择**：
   - 一般用途 → HashSet
   - 需要保持顺序 → LinkedHashSet
   - 需要排序 → TreeSet

3. **Map的选择**：
   - 一般用途 → HashMap
   - 需要保持插入顺序 → LinkedHashMap
   - 需要按键排序 → TreeMap

理解Java集合类的继承骨架有助于：
- 正确选择合适的集合类
- 编写更灵活的代码(面向接口编程)
- 更好地扩展自定义集合类
- 理解集合框架的设计思想