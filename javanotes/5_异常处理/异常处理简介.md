# Java异常处理简介

异常处理是Java编程中处理程序运行时错误的重要机制。Java提供了一套完善的异常处理框架，帮助开发者优雅地处理程序执行过程中可能出现的错误情况。

## 异常分类

Java中的异常分为两大类：

1. **Checked Exception（检查型异常）**：
   - 必须被处理（捕获或声明抛出）
   - 继承自`Exception`类
   - 例如：`IOException`, `SQLException`

2. **Unchecked Exception（非检查型异常）**：
   - 不强制要求处理
   - 包括`RuntimeException`及其子类，以及`Error`及其子类
   - 例如：`NullPointerException`, `ArrayIndexOutOfBoundsException`

## 异常处理机制

### 1. try-catch-finally 块

```java
try {
    // 可能抛出异常的代码
} catch (ExceptionType1 e1) {
    // 处理ExceptionType1类型的异常
} catch (ExceptionType2 e2) {
    // 处理ExceptionType2类型的异常
} finally {
    // 无论是否发生异常都会执行的代码
    // 常用于资源释放
}
```

### 2. throws 关键字

方法可以声明它可能抛出的异常，由**调用者处理**：

```java
public void readFile() throws IOException {
    // 可能抛出IOException的代码
}
```

### 3. throw 关键字

主动抛出异常：

```java
if (age < 0) {
    throw new IllegalArgumentException("年龄不能为负数");
}
```

## 自定义异常

可以创建自己的异常类：

```java
public class MyException extends Exception {
    public MyException(String message) {
        super(message);
    }
    
    public MyException(String message, Throwable cause) {
        super(message, cause);
    }
}
```

## 异常处理最佳实践

1. 只捕获你能处理的异常
2. 不要忽略异常（空的catch块是坏习惯）
3. 优先使用最具体的异常类型
4. 在finally块中释放资源
5. 考虑使用try-with-resources语句（Java 7+）
6. 异常信息应该清晰有用
7. 避免在finally块中使用return语句

## Java 7+ 新特性

### try-with-resources

自动关闭实现了`AutoCloseable`接口的资源：

```java
try (BufferedReader br = new BufferedReader(new FileReader(path))) {
    return br.readLine();
} catch (IOException e) {
    e.printStackTrace();
}
```

### 多重捕获

```java
try {
    // some code
} catch (IOException | SQLException e) {
    // 处理IO或SQL异常
    e.printStackTrace();
}
```

异常处理是编写健壮Java程序的关键部分，合理使用异常处理可以大大提高程序的可靠性和可维护性。