# Java异常处理基本知识点

## 一、异常的概念
异常（Exception）是程序在运行过程中发生的非正常事件，它会中断正常的指令流。

## 二、异常的分类体系

```
Throwable
├── Error（错误，通常不可恢复）
│   ├── VirtualMachineError
│   └── ...
└── Exception（异常，可处理）
    ├── RuntimeException（运行时异常/非检查异常）
    │   ├── NullPointerException
    │   ├── IndexOutOfBoundsException
    │   └── ...
    └── 其他Exception（检查异常）
        ├── IOException
        ├── SQLException
        └── ...
```

## 三、异常处理关键字

1. **try** - 定义可能抛出异常的代码块
2. **catch** - 捕获并处理特定类型的异常
3. **finally** - 无论是否发生异常都会执行的代码块
4. **throw** - 主动抛出一个异常对象
5. **throws** - 声明方法可能抛出的异常类型

## 四、基本语法结构

```java
try {
    // 可能抛出异常的代码
} catch (ExceptionType1 e) {
    // 处理ExceptionType1
} catch (ExceptionType2 e) {
    // 处理ExceptionType2
} finally {
    // 最终执行的代码
}
```

## 五、异常处理流程

1. 当try块中的代码抛出异常时，JVM会查找匹配的catch块
2. 如果找到匹配的catch块，则执行该catch块中的代码
3. 无论是否捕获异常，finally块都会执行
4. 如果没有匹配的catch块，异常会向上抛出给调用者

## 六、常见运行时异常

1. `NullPointerException` - 空指针异常
2. `ArrayIndexOutOfBoundsException` - 数组越界
3. `ClassCastException` - 类型转换异常
4. `ArithmeticException` - 算术异常（如除以零）
5. `IllegalArgumentException` - 非法参数异常

## 七、异常处理注意事项

1. **捕获顺序**：子类异常在前，父类异常在后
2. **资源释放**：应在finally块中释放资源
3. **避免过度捕获**：不要捕获所有异常（`catch(Exception e)`）
4. **日志记录**：应记录异常信息便于调试
5. **异常转换**：可以将底层异常转换为高层业务异常

## 八、自定义异常示例

```java
// 自定义业务异常
public class BusinessException extends RuntimeException {
    public BusinessException(String message) {
        super(message);
    }
    
    public BusinessException(String message, Throwable cause) {
        super(message, cause);
    }
}

// 使用示例
if (balance < amount) {
    throw new BusinessException("余额不足");
}
```

## 九、Java 7+ 增强特性

1. **try-with-resources**：自动资源管理
   ```java
   try (InputStream is = new FileInputStream("file.txt")) {
       // 使用资源
   } catch (IOException e) {
       e.printStackTrace();
   }
   ```

2. **多重捕获**：
   ```java
   try {
       // 代码
   } catch (IOException | SQLException e) {
       e.printStackTrace();
   }
   ```

掌握这些基本知识点是编写健壮Java程序的基础，合理的异常处理可以大大提高程序的可靠性和可维护性。