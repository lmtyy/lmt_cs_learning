# Java 中类的不同关系

在 Java 面向对象编程中，类与类之间主要存在以下几种关系：

## 1. 继承关系 (Inheritance) - "is-a" 关系

继承是类与类之间最紧密的关系，表示"是一个"的关系。

```java
class Animal {
    void eat() {
        System.out.println("Animal is eating");
    }
}

class Dog extends Animal {  // Dog 继承 Animal
    void bark() {
        System.out.println("Dog is barking");
    }
}
```

特点：
- 使用 `extends` 关键字
- 子类继承父类的属性和方法
- Java 是单继承，一个类只能直接继承一个父类
- 可以实现多重继承（通过接口）

## 2. 实现关系 (Implementation) - 类与接口

表示类实现接口的功能，满足"能做什么"的关系。

```java
interface Swimmable {
    void swim();
}

class Duck implements Swimmable {  // Duck 实现 Swimmable 接口
    public void swim() {
        System.out.println("Duck is swimming");
    }
}
```

特点：
- 使用 `implements` 关键字
- 一个类可以实现多个接口
- 必须实现接口中的所有抽象方法

## 3. 关联关系 (Association) - "has-a" 关系

表示类与类之间的连接，可以是单向或双向的。

```java
class Teacher {
    private String name;
    // 教师与学生有关联关系
    private List<Student> students;
    
    public void teach() {
        System.out.println(name + " is teaching");
    }
}

class Student {
    private String name;
}
```

关联关系的变体：

### 3.1 聚合关系 (Aggregation) - 弱"has-a"关系

表示整体与部分的关系，部分可以独立于整体存在。

```java
class Department {
    private List<Professor> professors;
    
    public Department(List<Professor> professors) {
        this.professors = professors;  // 教授可以独立于系存在
    }
}

class Professor {
    private String name;
}
```

### 3.2 组合关系 (Composition) - 强"has-a"关系

表示整体与部分的关系，部分不能独立于整体存在。

```java
class Car {
    private Engine engine;  // 发动机不能独立于汽车存在
    
    public Car() {
        this.engine = new Engine();
    }
}

class Engine {
    void start() {
        System.out.println("Engine started");
    }
}
```

## 4. 依赖关系 (Dependency) - "use-a" 关系

一个类的方法使用另一个类的对象作为参数或局部变量。

```java
class ReportGenerator {
    // 依赖 Printer 类
    void generateReport(Printer printer) {
        printer.print("Report content");
    }
}

class Printer {
    void print(String content) {
        System.out.println(content);
    }
}
```

特点：
- 临时性的关系
- 通常表现为方法参数、局部变量或方法调用

## 5. 内部类关系 (Inner Class)

一个类定义在另一个类的内部。

```java
class Outer {
    private int x = 10;
    
    class Inner {  // 内部类
        void display() {
            System.out.println("x = " + x);  // 可以访问外部类的私有成员
        }
    }
}
```

内部类的几种形式：
- 成员内部类
- 静态内部类
- 局部内部类
- 匿名内部类

## 关系对比表

| 关系类型 | 关键字 | 关系强度 | 生命周期 | UML表示 | 示例 |
|---------|--------|---------|---------|---------|------|
| 继承 | extends | 最强 | 长期 | 实线+空心三角 | Dog extends Animal |
| 实现 | implements | 强 | 长期 | 虚线+空心三角 | Duck implements Swimmable |
| 组合 | 无(成员变量) | 强 | 一致 | 实线+实心菱形 | Car has Engine |
| 聚合 | 无(成员变量) | 中 | 可独立 | 实线+空心菱形 | Department has Professors |
| 关联 | 无(成员变量) | 弱 | 可独立 | 实线箭头 | Teacher has Students |
| 依赖 | 无(方法参数) | 最弱 | 临时 | 虚线箭头 | ReportGenerator uses Printer |

## 如何选择适当的关系

1. **优先使用组合而不是继承**：组合更灵活，降低耦合度
2. **需要多态时使用继承或接口**
3. **临时使用选择依赖关系**
4. **整体-部分关系考虑聚合或组合**：看部分是否能独立存在

理解这些关系有助于设计出更合理、更易维护的面向对象系统。