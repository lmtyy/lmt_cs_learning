# Java 中对象的声明与定义

在 Java 中，对象的声明和定义（创建）是两个相关但不同的概念。让我详细解释它们的区别和用法。

## 1. 对象声明 (Declaration)

声明是指告诉编译器一个变量的存在和它的类型，但**不创建实际对象**。

### 语法
```java
ClassName referenceVariable;
```

### 示例
```java
String str;      // 声明一个String类型的引用变量
Scanner input;   // 声明一个Scanner类型的引用变量
List<Integer> numbers; // 声明一个List类型的引用变量
```

### 特点
- 只创建了引用变量，没有实际对象
- 引用变量默认值为`null`
- 此时还不能使用对象的方法或属性

## 2. 对象定义/实例化 (Instantiation)

定义（更准确说是实例化）是指**实际创建对象**的过程，使用`new`关键字。

### 语法
```java
referenceVariable = new ClassName();
```

### 示例
```java
str = new String("Hello");      // 创建String对象
input = new Scanner(System.in); // 创建Scanner对象
numbers = new ArrayList<>();    // 创建ArrayList对象
```

## 3. 声明与实例化合二为一

通常我们会将声明和实例化合并在一条语句中：

```java
ClassName referenceVariable = new ClassName();
```

### 示例
```java
String message = new String("Welcome");
Date today = new Date();
ArrayList<String> names = new ArrayList<>();
```

## 4. 特殊情况

### 4.1 字符串字面量

String 有特殊语法，可以直接使用字面量创建对象：

```java
String s1 = "literal";  // 使用字符串常量池
String s2 = new String("literal");  // 显式创建新对象
```

### 4.2 匿名对象

不需要声明引用变量，直接创建使用：

```java
System.out.println(new Date());  // 创建匿名Date对象并直接使用
```

## 5. 对象初始化的完整过程

1. **声明引用变量**：在栈内存中分配空间存储引用
2. **创建对象**：在堆内存中分配空间
3. **调用构造方法**：初始化对象状态
4. **赋值引用**：将堆内存地址赋给引用变量

## 6. 示例代码

```java
public class ObjectExample {
    public static void main(String[] args) {
        // 1. 仅声明
        Person p1;
        
        // 2. 声明并实例化
        Person p2 = new Person();
        
        // 3. 使用对象
        p2.setName("Alice");
        System.out.println(p2.getName());
        
        // 4. 匿名对象
        System.out.println(new Person().getName()); // 默认null
    }
}

class Person {
    private String name;
    
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
}
```

## 7. 重要注意事项

1. **未初始化的引用变量不能使用**：
   ```java
   Person p;
   p.getName(); // 编译错误：可能尚未初始化变量p
   ```

2. **多个引用可以指向同一个对象**：
   ```java
   Person a = new Person();
   Person b = a; // a和b引用同一个对象
   ```

3. **垃圾回收**：当对象没有引用指向时，会被GC回收

4. **基本类型不是对象**：`int`, `double`等是值类型，不是引用类型

理解对象的声明和实例化是Java面向对象编程的基础，这对于正确管理内存和避免空指针异常非常重要。