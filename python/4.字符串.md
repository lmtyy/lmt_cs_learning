## 字符串



### 1. 字符串的基本概念

字符串是由 Unicode 字符组成的**不可变序列**，用于表示文本数据。

*   **不可变性**：一旦创建，字符串的内容不能被修改。任何"修改"操作都会创建一个新的字符串对象。
*   **序列特性**：支持索引、切片等序列操作。
*   **Unicode 支持**：可以表示世界上大多数书写系统的字符。

### 2. 创建字符串

Python 提供了多种创建字符串的方式：

```python
# 1. 单引号
s1 = 'Hello, World!'

# 2. 双引号
s2 = "Hello, Python!"

# 3. 三引号（用于多行字符串）
s3 = '''这是一个
多行
字符串'''

s4 = """这也是一个
多行
字符串"""

# 4. 空字符串
empty_str = ''

# 5. 使用 str() 构造函数
num = 123
s5 = str(num)  # "123"

print(s3)
```

### 3. 字符串的索引和切片

字符串支持序列的索引和切片操作：

```python
text = "Python Programming"

# 正向索引（从0开始）
print(text[0])    # 'P' - 第一个字符
print(text[6])    # ' ' - 空格
print(text[7])    # 'P' - Programming的P

# 负向索引（从-1开始，从右往左）
print(text[-1])   # 'g' - 最后一个字符
print(text[-2])   # 'n' - 倒数第二个字符

# 切片 [start:end:step]
print(text[0:6])     # "Python" - 索引0到5
print(text[7:18])    # "Programming" - 索引7到17
print(text[::2])     # "Pto rgamn" - 每隔一个字符
print(text[::-1])    # "gnimmargorP nohtyP" - 字符串反转

# 省略参数
print(text[:6])      # "Python" - 从开始到索引5
print(text[7:])      # "Programming" - 从索引7到结束
```

### 4. 字符串的常用方法

Python 提供了丰富的字符串方法：

#### 大小写转换

```python
s = "Hello Python"

print(s.upper())        # "HELLO PYTHON" - 全部大写
print(s.lower())        # "hello python" - 全部小写
print(s.title())        # "Hello Python" - 每个单词首字母大写
print(s.capitalize())   # "Hello python" - 首字母大写
print(s.swapcase())     # "hELLO pYTHON" - 大小写互换
```

#### 查找和替换

```python
s = "apple banana apple cherry"

# 查找
print(s.find('apple'))      # 0 - 第一次出现的位置
print(s.rfind('apple'))     # 12 - 最后一次出现的位置
print(s.index('banana'))    # 6 - 类似find，但找不到会报错
print(s.count('apple'))     # 2 - 出现次数

# 替换
print(s.replace('apple', 'orange'))  # "orange banana orange cherry"
print(s.replace('apple', 'orange', 1))  # 只替换第一个

# 检查开头和结尾
print(s.startswith('apple'))  # True
print(s.endswith('cherry'))   # True
```

#### 分割和连接

```python
# 分割
csv_data = "apple,banana,cherry,date"
fruits = csv_data.split(',')
print(fruits)  # ['apple', 'banana', 'cherry', 'date']

text = "Hello   World   Python"
words = text.split()  # 默认按空白字符分割
print(words)  # ['Hello', 'World', 'Python']

# 按行分割
multiline = "Line 1\nLine 2\nLine 3"
lines = multiline.splitlines()
print(lines)  # ['Line 1', 'Line 2', 'Line 3']

# 连接
fruits = ['apple', 'banana', 'cherry']
joined = ', '.join(fruits)
print(joined)  # "apple, banana, cherry"
```

#### 去除空白字符

```python
s = "   Hello World   \n\t"

print(s.strip())      # "Hello World" - 去除两端空白
print(s.lstrip())     # "Hello World   \n\t" - 去除左端空白
print(s.rstrip())     # "   Hello World" - 去除右端空白

# 去除特定字符
s2 = "***Hello***"
print(s2.strip('*'))  # "Hello"
```

#### 字符检查

```python
s = "Hello123"

print(s.isalpha())     # False - 是否全是字母
print(s.isdigit())     # False - 是否全是数字
print(s.isalnum())     # True - 是否全是字母或数字
print(s.islower())     # False - 是否全是小写
print(s.isupper())     # False - 是否全是大写
print(s.isspace())     # False - 是否全是空白字符

print("HELLO".isupper())  # True
print("123".isdigit())    # True
```

### 5. 字符串格式化

Python 提供了多种字符串格式化方式：

#### f-strings (Python 3.6+ 推荐)

```python
name = "Alice"
age = 25
height = 1.68

# 基本用法
print(f"Name: {name}, Age: {age}")

# 表达式计算
print(f"Next year: {age + 1}")

# 格式化数字
print(f"Height: {height:.2f} meters")  # 保留2位小数
print(f"Percentage: {0.4567:.1%}")     # 45.7%

# 对齐和填充
print(f"{name:>10}")  # 右对齐，宽度10
print(f"{name:<10}")  # 左对齐，宽度10
print(f"{name:^10}")  # 居中对齐，宽度10
print(f"{name:*^10}") # 居中对齐，用*填充
```

#### format() 方法

```python
name = "Bob"
age = 30

print("Name: {}, Age: {}".format(name, age))
print("Name: {1}, Age: {0}".format(age, name))  # 按索引
print("Name: {name}, Age: {age}".format(name=name, age=age))  # 按关键字
```

#### % 格式化 (传统方式)

```python
name = "Charlie"
age = 35

print("Name: %s, Age: %d" % (name, age))
print("Percent: %.2f" % 0.4567)
```

### 6. 转义字符

```python
# 常见转义字符
print("Hello\nWorld")      # 换行
print("Hello\tWorld")      # 制表符
print("She said: \"Hello\"")  # 双引号
print('It\'s mine')        # 单引号
print("Backslash: \\")     # 反斜杠

# 原始字符串（忽略转义）
path = r"C:\Users\Name\Documents"
print(path)  # C:\Users\Name\Documents
```

### 7. 字符串运算

```python
s1 = "Hello"
s2 = "World"

# 拼接
print(s1 + " " + s2)  # "Hello World"

# 重复
print(s1 * 3)         # "HelloHelloHello"

# 成员测试
print('H' in s1)      # True
print('x' not in s1)  # True

# 比较
print(s1 == "Hello")  # True
print(s1 < "Python")  # True (按字典序)
```

### 8. 实用技巧

```python
# 字符串长度
s = "Hello"
print(len(s))  # 5

# 遍历字符串
for char in "Python":
    print(char, end=' ')  # P y t h o n

# 枚举遍历
for index, char in enumerate("Hello"):
    print(f"Index {index}: {char}")

# 检查子字符串
text = "Python programming is fun"
print("python" in text.lower())  # True (不区分大小写)

# 字符串分区
email = "user@example.com"
local, at, domain = email.partition('@')
print(f"Local: {local}, Domain: {domain}")  # Local: user, Domain: example.com
```

### 9. 字符串与字节的转换

```python
# 字符串转字节
text = "Hello 世界"
byte_data = text.encode('utf-8')
print(byte_data)  # b'Hello \xe4\xb8\x96\xe7\x95\x8c'

# 字节转字符串
decoded_text = byte_data.decode('utf-8')
print(decoded_text)  # "Hello 世界"
```

