---

## 绘制图表数据

---

### 一、Python绘图的基本概念

- **数据准备**：绘图的前提是有要展示的数据，数据通常以列表、数组、Pandas的DataFrame或Series形式存在。
- **选取合适的图表类型**：根据数据类型和分析需求选择合适的图表，如折线图、柱状图、散点图、饼图、箱线图等。
- **调用绘图库**：用相应库的接口绘制图表。
- **调整图表属性**：包括标题、坐标轴标签、图例、颜色、字体等，使图表更易读美观。

---

### 二、Python常用绘图库介绍

#### 1. Matplotlib

- Python最基础的绘图库，功能强大，支持多种图表。
- 语法相对底层，需要较多代码控制细节。
- 适合精细控制图表样式。

```python
import matplotlib.pyplot as plt
```

#### 2. Seaborn

- 基于Matplotlib，专为统计数据可视化设计。
- 语法更简洁，默认样式美观。
- 适合绘制分类变量和分布图。

```python
import seaborn as sns
```

#### 3. Pandas内置绘图功能

- DataFrame和Series对象自带`.plot()`接口，基于Matplotlib实现。
- 快速绘图，适合探索性数据分析。

```python
import pandas as pd
```

#### 4. Plotly

- 绘制交互式图表，适合网页展示。
- 语法层次稍复杂。

```python
import plotly.express as px
```

---

### 三、Matplotlib基础图表示例

#### 1. 折线图

```python
import matplotlib.pyplot as plt

x = [1, 2, 3, 4, 5]
y = [10, 12, 15, 14, 20]

plt.plot(x, y, marker='o', linestyle='-', color='b')  # 画折线图
plt.title('折线图示例')
plt.xlabel('X轴')
plt.ylabel('Y轴')
plt.grid(True)  # 显示网格
plt.show()
```

#### 2. 柱状图

```python
import matplotlib.pyplot as plt

categories = ['A', 'B', 'C', 'D']
values = [5, 7, 3, 8]

plt.bar(categories, values, color='skyblue')
plt.title('柱状图示例')
plt.xlabel('类别')
plt.ylabel('数值')
plt.show()
```

#### 3. 散点图

```python
import matplotlib.pyplot as plt

x = [1, 2, 3, 4, 5]
y = [5, 7, 8, 6, 9]

plt.scatter(x, y, c='red', marker='x')
plt.title('散点图示例')
plt.xlabel('X轴')
plt.ylabel('Y轴')
plt.show()
```

#### 4. 饼图

```python
import matplotlib.pyplot as plt

labels = ['苹果', '香蕉', '橘子', '梨']
sizes = [30, 15, 45, 10]

plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)
plt.title('饼图示例')
plt.show()
```

---

### 四、Seaborn绘图示例

Seaborn对统计绘图提供了很多便捷函数，下面以内置数据集打个样。

```python
import seaborn as sns
import matplotlib.pyplot as plt

# 加载内置数据集
tips = sns.load_dataset("tips")

# 盒须图：显示小费的分布，按“性别”分类
sns.boxplot(x='day', y='total_bill', hue='sex', data=tips)
plt.title('Seaborn盒须图示例')
plt.show()

# 热力图：相关系数矩阵
corr = tips.corr()
sns.heatmap(corr, annot=True, cmap='coolwarm')
plt.title('Seaborn热力图示例')
plt.show()
```

---

### 五、Pandas快速绘图

Pandas中的`DataFrame`对象支持快速绘图：

```python
import pandas as pd
import matplotlib.pyplot as plt

data = {'年份': [2017, 2018, 2019, 2020, 2021],
        '销售额': [250, 270, 300, 350, 400]}
df = pd.DataFrame(data)

df.plot(x='年份', y='销售额', kind='line', marker='o', title='年度销售额折线图')
plt.show()
```

---

### 六、Plotly交互式绘图简例

```python
import plotly.express as px

df = px.data.iris()  # 载入示例数据集

fig = px.scatter(df, x='sepal_width', y='sepal_length', color='species',
                 title='鸢尾花数据散点图')
fig.show()
```

---

### 七、绘图技巧及注意点

1. **选择合适图表**：比如时间序列用折线图，分类比较用柱状图，比例用饼图。

2. **调整图表美观性**：添加标题、轴标签，合理使用颜色与图例。

3. **处理大数据集**：绘制时要考虑性能，必要时抽样。

4. **保存图表**：

   ```python
   plt.savefig('figure.png', dpi=300)
   ```

5. **多图布局**：

   ```python
   fig, axs = plt.subplots(1, 2, figsize=(10, 4))
   axs[0].plot(x, y)
   axs[1].bar(categories, values)
   plt.show()
   ```

---

### 总结

绘制数据图表是Python数据分析中不可或缺的一部分，掌握Matplotlib、Seaborn、Pandas和Plotly等库的使用，可以高效地对数据进行可视化和传达。建议多练习不同图表并结合实际业务需求灵活运用。