## 常见运算

Python 提供了丰富多样的运算符，可以大致分为以下几类。

### 1. 算术运算符

用于基本的数学运算。

| 运算符 | 描述               | 示例      | 结果       |
| :----- | :----------------- | :-------- | :--------- |
| `+`    | 加法               | `5 + 3`   | `8`        |
| `-`    | 减法               | `10 - 4`  | `6`        |
| `*`    | 乘法               | `3 * 4`   | `12`       |
| `/`    | 除法（返回浮点数） | `10 / 3`  | `3.333...` |
| `//`   | 整除（向下取整）   | `10 // 3` | `3`        |
| `%`    | 取模（求余数）     | `10 % 3`  | `1`        |
| `**`   | 幂运算             | `2 ** 3`  | `8`        |

**示例代码：**

```python
# 基本算术运算
a, b = 10, 3
print(f"{a} + {b} = {a + b}")   # 13
print(f"{a} - {b} = {a - b}")   # 7
print(f"{a} * {b} = {a * b}")   # 30
print(f"{a} / {b} = {a / b}")   # 3.333...
print(f"{a} // {b} = {a // b}") # 3
print(f"{a} % {b} = {a % b}")   # 1
print(f"{a} ** {b} = {a ** b}") # 1000

# 负数整除（向下取整）
print(f"-10 // 3 = {-10 // 3}") # -4
```

### 2. 比较运算符

用于比较两个值，返回布尔值 `True` 或 `False`。

| 运算符 | 描述     | 示例     | 结果    |
| :----- | :------- | :------- | :------ |
| `==`   | 等于     | `5 == 5` | `True`  |
| `!=`   | 不等于   | `5 != 3` | `True`  |
| `>`    | 大于     | `5 > 3`  | `True`  |
| `<`    | 小于     | `5 < 3`  | `False` |
| `>=`   | 大于等于 | `5 >= 5` | `True`  |
| `<=`   | 小于等于 | `5 <= 3` | `False` |

**示例代码：**

```python
x, y = 10, 20
print(f"{x} == {y}: {x == y}")  # False
print(f"{x} != {y}: {x != y}")  # True
print(f"{x} > {y}: {x > y}")    # False
print(f"{x} < {y}: {x < y}")    # True
print(f"{x} >= {y}: {x >= y}")  # False
print(f"{x} <= {y}: {x <= y}")  # True

# 字符串比较（按字典序）
print(f"'apple' < 'banana': {'apple' < 'banana'}")  # True
```

### 3. 逻辑运算符

用于组合多个条件。

| 运算符 | 描述   | 示例             | 结果    |
| :----- | :----- | :--------------- | :------ |
| `and`  | 逻辑与 | `True and False` | `False` |
| `or`   | 逻辑或 | `True or False`  | `True`  |
| `not`  | 逻辑非 | `not True`       | `False` |

**示例代码：**

```python
age = 25
has_license = True

# 使用逻辑运算符组合条件
can_drive = age >= 18 and has_license
print(f"可以开车: {can_drive}")  # True

is_weekend = True
is_holiday = False
can_relax = is_weekend or is_holiday
print(f"可以休息: {can_relax}")  # True

is_raining = True
print(f"不是雨天: {not is_raining}")  # False

# 短路求值特性
def check():
    print("函数被调用了!")
    return True

result = False and check()  # check() 不会被调用
print(result)  # False
```

### 4. 赋值运算符

用于给变量赋值。

| 运算符 | 描述     | 等价于                   |
| :----- | :------- | :----------------------- |
| `=`    | 基本赋值 | `x = 5`                  |
| `+=`   | 加后赋值 | `x += 3` → `x = x + 3`   |
| `-=`   | 减后赋值 | `x -= 2` → `x = x - 2`   |
| `*=`   | 乘后赋值 | `x *= 4` → `x = x * 4`   |
| `/=`   | 除后赋值 | `x /= 2` → `x = x / 2`   |
| `//=`  | 整除赋值 | `x //= 3` → `x = x // 3` |
| `%=`   | 取模赋值 | `x %= 3` → `x = x % 3`   |
| `**=`  | 幂赋值   | `x **= 2` → `x = x ** 2` |

**示例代码：**

```python
x = 10
print(f"初始值: {x}")  # 10

x += 5  # x = x + 5
print(f"加5后: {x}")   # 15

x *= 2  # x = x * 2
print(f"乘2后: {x}")   # 30

x //= 4  # x = x // 4
print(f"整除4后: {x}") # 7

x **= 2  # x = x ** 2
print(f"平方后: {x}")   # 49
```

### 5. 位运算符

用于对整数进行二进制位操作。

| 运算符 | 描述     | 示例                        | 结果            |
| :----- | :------- | :-------------------------- | :-------------- |
| `&`    | 按位与   | `5 & 3` (`0b101 & 0b011`)   | `1` (`0b001`)   |
| `\|`   | 按位或   | `5 \| 3` (`0b101 \| 0b011`) | `7` (`0b111`)   |
| `^`    | 按位异或 | `5 ^ 3` (`0b101 ^ 0b011`)   | `6` (`0b110`)   |
| `~`    | 按位取反 | `~5`                        | `-6`            |
| `<<`   | 左移     | `5 << 1` (`0b101`左移1位)   | `10` (`0b1010`) |
| `>>`   | 右移     | `5 >> 1` (`0b101`右移1位)   | `2` (`0b010`)   |

**示例代码：**

```python
a, b = 5, 3  # 二进制: 5 = 0b101, 3 = 0b011

print(f"{a} & {b} = {a & b}")    # 1 (0b001)
print(f"{a} | {b} = {a | b}")    # 7 (0b111)
print(f"{a} ^ {b} = {a ^ b}")    # 6 (0b110)
print(f"~{a} = {~a}")            # -6
print(f"{a} << 1 = {a << 1}")    # 10 (0b1010)
print(f"{a} >> 1 = {a >> 1}")    # 2 (0b010)

# 实际应用：判断奇偶
num = 7
is_even = (num & 1) == 0
print(f"{num} 是偶数吗? {is_even}")  # False
```

### 6. 成员运算符

用于测试序列中是否包含某个成员。

| 运算符   | 描述                            | 示例                                  |
| :------- | :------------------------------ | :------------------------------------ |
| `in`     | 如果在序列中找到值返回 True     | `'a' in ['a', 'b', 'c']` → `True`     |
| `not in` | 如果在序列中没有找到值返回 True | `'d' not in ['a', 'b', 'c']` → `True` |

**示例代码：**

```python
fruits = ['apple', 'banana', 'orange']

print(f"'apple' in fruits: {'apple' in fruits}")        # True
print(f"'grape' in fruits: {'grape' in fruits}")        # False
print(f"'grape' not in fruits: {'grape' not in fruits}") # True

# 字符串中的成员测试
text = "Hello, World!"
print(f"'Hello' in text: {'Hello' in text}")  # True
print(f"'Python' in text: {'Python' in text}") # False

# 字典中测试键是否存在
person = {'name': 'Alice', 'age': 25}
print(f"'name' in person: {'name' in person}")  # True
print(f"'city' in person: {'city' in person}")  # False
```

### 7. 身份运算符

用于比较两个对象的内存地址是否相同。

| 运算符   | 描述                                  | 示例         |
| :------- | :------------------------------------ | :----------- |
| `is`     | 如果两个变量引用同一个对象则返回 True | `x is y`     |
| `is not` | 如果两个变量引用不同的对象则返回 True | `x is not y` |

**示例代码：**

```python
a = [1, 2, 3]
b = a        # b 和 a 引用同一个列表对象
c = [1, 2, 3] # c 是一个新的列表对象，内容相同

print(f"a is b: {a is b}")        # True (同一个对象)
print(f"a is c: {a is c}")        # False (不同对象)
print(f"a == c: {a == c}")        # True (内容相同)

# 小整数缓存（-5 到 256）
x = 100
y = 100
print(f"x is y (小整数): {x is y}")  # True

x = 1000
y = 1000
print(f"x is y (大整数): {x is y}")  # False (Python实现相关)
```

### 8. 运算符优先级

当表达式中有多个运算符时，Python 会按照优先级顺序计算：

1. `()` - 括号（最高优先级）
2. `**` - 幂运算
3. `~` `+` `-` - 按位取反、正负号（一元运算符）
4. `*` `/` `%` `//` - 乘、除、取模、整除
5. `+` `-` - 加、减
6. `<<` `>>` - 位移
7. `&` - 按位与
8. `^` `|` - 按位异或、按位或
9. `==` `!=` `>` `<` `>=` `<=` - 比较运算符
10. `is` `is not` - 身份运算符
11. `in` `not in` - 成员运算符
12. `not` - 逻辑非
13. `and` - 逻辑与
14. `or` - 逻辑或（最低优先级）

**示例代码：**

```python
# 使用括号明确优先级
result = (2 + 3) * 4  # 20，而不是 14
print(result)

# 复杂的表达式
complex_expr = 5 + 3 * 2 ** 2 / 4 - 1
print(f"复杂表达式结果: {complex_expr}")  # 5 + 12/4 - 1 = 5 + 3 - 1 = 7
```

