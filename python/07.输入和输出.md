## 输入和输出

### input

##### 1. 基本概述

`input()` 是Python内置的一个函数，用于从控制台（标准输入）接收用户输入。它会暂停程序的执行，等待用户输入数据，并将用户输入的数据作为字符串返回。

---

##### 2. 函数原型

```python
input([prompt])
```

- `prompt`（可选）：一个字符串，作为提示信息显示给用户，提醒用户输入内容。  
- 返回值：用户输入的内容，类型为字符串（`str`）。

---

##### 3. 使用示例

```python
name = input("请输入你的名字：")
print("你好，" + name)
```

运行时，会显示提示 `"请输入你的名字："`，等待用户输入。当用户输入完成后，按回车，程序继续执行，将用户输入的内容赋值给变量 `name`。

---

##### 4. 注意事项

- **返回类型始终是字符串**  
  无论用户输入是数字还是其他字符，`input()` 函数返回的都是字符串类型。如果需要数值类型，需要手动转换，比如：

  ```python
  age = int(input("请输入你的年龄："))
  ```

  这样才会获得一个整数类型的 `age` 变量。

- **输入内容的安全性**  
  在某些场景下，用户输入的内容可能包含恶意代码或不符合预期。要谨慎处理用户输入，避免安全问题，如代码注入、格式错误等。

- **Python 2.x 和 Python 3.x 的区别**  

  - Python 2中用的是 `raw_input()` 函数，返回字符串。  
  - Python 2的 `input()` 会尝试将输入的内容作为Python表达式求值（不安全）。  
  - Python 3中，`input()`函数的功能等同于Python 2的`raw_input()`，直接返回字符串。

---

##### 5. 示例：读取整数并计算平方

```python
num_str = input("请输入一个整数：")
num = int(num_str)  # 将字符串转换成整数
square = num ** 2
print(f"{num} 的平方是 {square}")
```

运行流程：

1. 显示提示信息。  
2. 用户输入，如 `5`，按回车。  
3. 读取字符串 `"5"`，转换成整数 `5`。  
4. 计算平方，输出结果。

---

##### 6. 进一步示例：处理异常

```python
try:
    num = int(input("请输入一个整数："))
    print(f"您输入的数字是 {num}")
except ValueError:
    print("输入无效，请输入一个整数。")
```

用 `try-except` 块捕获转换异常，防止用户输入非数字导致程序崩溃。

---

##### 7. 总结

- `input()` 用于获取用户的输入，返回字符串。  
- 可以给`input()`传递一个可选的提示信息字符串。  
- 需要时，手动将输入转换成其它数据类型。  
- 在Python的交互式程序和命令行脚本中非常常用。  
- 注意异常处理和输入内容的安全性。

---

#### `input()` 函数的高级用法和技巧

---

##### 1. 多值输入：一次输入多个数据

通常用户可能需要一次输入多个值，然后程序需要对这些值进行分割和处理，比如一行输入多个数字。

```python
# 用户输入多个数字，以空格分隔
data = input("请输入多个数字，用空格分隔：")  # 输入示例：1 2 3 4 5
numbers = data.split()  # 以空格分割字符串，得到列表 ['1', '2', '3', '4', '5']
numbers = [int(n) for n in numbers]  # 转换成整数列表
print(numbers)
```

---

##### 2. 限定输入格式和验证

可以使用循环和条件判断，确保用户输入符合预期格式。

```python
while True:
    age = input("请输入年龄（数字）：")
    if age.isdigit():
        age = int(age)
        break
    else:
        print("输入格式错误，请输入数字。")
print(f"你的年龄是 {age}")
```

这段代码会一直提示用户输入，直到输入有效数字。

---

##### 3. 使用正则表达式验证输入

对于复杂的格式（比如邮箱、手机号等），可以用正则表达式对输入进行验证。

```python
import re

pattern = r'^\w+@\w+\.\w+$'  # 简单邮箱正则

email = input("请输入邮箱：")
if re.match(pattern, email):
    print("邮箱格式正确")
else:
    print("邮箱格式错误")
```

---

##### 4. 隐藏输入: 获取密码等敏感信息

`input()` 默认显示用户输入的内容，敏感输入需要隐藏。Python 标准库 `getpass` 可用来隐藏输入字符。

```python
import getpass

password = getpass.getpass("请输入密码：")
print("密码长度为：", len(password))
```

`getpass.getpass()` 会隐藏用户输入的内容，适合密码输入。

---

##### 5. 实现输入超时功能

标准 `input()` 方法没有输入超时限制。如果需要实现输入时间限制，可以使用线程或第三方库。以下是用 `signal` 模块在类Unix系统实现超时示例（Windows不支持）：

```python
import signal

def handler(signum, frame):
    raise TimeoutError

signal.signal(signal.SIGALRM, handler)
signal.alarm(5)  # 5秒后触发信号

try:
    data = input("请在5秒内输入内容：")
    signal.alarm(0)  # 取消定时器
    print("你输入的是：", data)
except TimeoutError:
    print("输入超时！")
```

---

##### 6. 自定义输入提示符样式

虽然 `input()` 自带提示文字，但如果想实现更丰富的提示，比如颜色或格式，可以结合`print()`打印彩色提示，再调用 `input()`：

```python
# 终端彩色打印示例（依赖ANSI转义码）
print("\033[1;32m请输入用户名：\033[0m", end="")
username = input()
print(f"欢迎你，{username}！")
```

---

##### 7. 多行输入

标准 `input()` 只能读取一行。如果想输入多行，可以循环调用，或者用其它方式（如 EOF 标志）结束输入：

```python
print("请输入多行文本，输入空行结束：")
lines = []
while True:
    line = input()
    if line == "":
        break
    lines.append(line)
text = "\n".join(lines)
print("你输入的内容是：")
print(text)
```

---

##### 8. 读取数字并处理异常的简洁写法

定义一个通用的输入读取函数，可以多次复用：

```python
def input_int(prompt):
    while True:
        try:
            return int(input(prompt))
        except ValueError:
            print("请输入有效的整数！")

num = input_int("请输入一个整数：")
print("输入的数字是:", num)
```

---

##### 总结

- 可以将一次输入拆分成多个值并批量处理。  
- 结合循环和判断实现输入格式校验。  
- 利用正则表达式或其他库确保输入合法。  
- 用`getpass`隐藏敏感输入。  
- 结合系统信号或线程实现输入超时。  
- 用 ANSI 转义码或库实现彩色提示。  
- 模拟多行输入模式。  
- 抽象通用的输入读取函数。  

### print

#### 1. 基本介绍

`print()` 是 Python 的一个内置函数，主要用于将信息输出到控制台（标准输出）。它通常用于调试、展示结果或与用户交互。

---

#### 2. 函数原型（Python 3.x）

```python
print(*objects, sep=' ', end='\n', file=sys.stdout, flush=False)
```

- `*objects`：一个或多个要打印的对象，多个对象之间用逗号分隔。
- `sep`（separator）：对象之间的分隔符，默认是一个空格。
- `end`：输出的结尾字符，默认是换行符 `\n`，即打印完自动换行。
- `file`：输出目标，默认是标准输出流 `sys.stdout`。可以替换成文件对象，实现输出到文件。
- `flush`：是否强制立即刷新输出缓冲区，默认是 `False`。

---

#### 3. 基础用法示例

```python
print("Hello, world!")
```

打印字符串并换行。

```python
print("Python", "is", "awesome")
```

打印多个对象，默认之间用空格分隔，输出：

```
Python is awesome
```

---

#### 4. 详细参数说明及示例

##### 4.1 `sep` — 分隔符参数

默认所有参数之间用空格分隔，可以修改：

```python
print("Python", "is", "awesome", sep="-")
```

输出：

```
Python-is-awesome
```

`sep` 可以是任意字符串，如逗号、制表符等。

---

##### 4.2 `end` — 行尾符

默认行尾是换行符，导致打印结束后光标换到下一行。可以修改为其他字符：

```python
print("Hello,", end=" ")
print("world!")
```

输出：

```
Hello, world!
```

这里两次 `print()` 在同一行输出。

---

##### 4.3 `file` — 输出位置

默认输出到控制台（标准输出），也可以输出到文件：

```python
with open("out.txt", "w") as f:
    print("Hello, file!", file=f)
```

这会将文本写入 `out.txt` 文件。

---

##### 4.4 `flush` — 是否立即刷新缓冲区

在某些实时需要显示输出的场合，需要立即刷新缓冲区：

```python
import time
print("开始计时", end="", flush=True)
time.sleep(3)
print("，3秒结束")
```

如果不加 `flush=True`，可能不会立即打印第一条信息。

---

#### 5. 打印格式

##### 5.1 使用格式化字符串（f-string，Python 3.6+）

```python
name = "Alice"
age = 30
print(f"姓名：{name}，年龄：{age}")
```

输出：

```
姓名：Alice，年龄：30
```

##### 5.2 使用 `str.format()`

```python
print("姓名：{}，年龄：{}".format(name, age))
```

##### 5.3 旧式 `%` 格式化

```python
print("姓名：%s，年龄：%d" % (name, age))
```

---

#### 6. 打印多个行、换行与转义

- 换行符 `\n` 可在字符串内插入换行：

```python
print("第一行\n第二行\n第三行")
```

- 制表符 `\t` 可缩进：

```python
print("一\t二\t三")
```

---

#### 7. 打印非字符串对象

`print()` 会自动调用对象的 `str()` 函数，将其转成字符串输出：

```python
print(123, 45.67, True, None, [1, 2, 3])
```

输出：

```python
123 45.67 True None [1, 2, 3]
```

---

#### 8. 进阶用法

##### 8.1 打印到标准错误流

```python
import sys
print("错误信息", file=sys.stderr)
```

##### 8.2 禁止自动换行（组合 `end` 参数）

```python
for i in range(3):
    print(i, end=" ")  # 0 1 2
```

##### 8.3 在同一行更新输出（实现类似进度条）

```python
import time
for i in range(101):
    print(f"\r进度: {i}%", end="")
    time.sleep(0.05)
print()  # 换行
```

`'\r'` 是回车符，回到行首覆盖输出，实现动态更新。

---

#### 9. 注意事项

- Python2 与 Python3 的 `print` 不同：Python2 中是语句，Python3中是函数。
- 打印大量数据时注意缓冲区和性能。
- 对象需要实现 `__str__` 或 `__repr__`，否则打印默认形式。

---

#### 10. 示例集锦

```python
# 多个参数，指定分隔符和结束符
print("2023", "06", "05", sep="-", end="")

# 输出到文件
with open("log.txt", "a") as f:
    print("程序运行日志", file=f)

# f-string 格式化
x = 10
y = 20
print(f"x={x}, y={y}, sum={x+y}")

# 进度条动画
import sys, time
for i in range(101):
    print(f"\rLoading... {i}%", end='')
    sys.stdout.flush()  # 立即输出
    time.sleep(0.05)
print()
```

---

## 